!function(){"use strict";const e=navigator.userAgent,t=()=>{let t="";return e.includes("Windows NT 10.0")&&(t="10"),e.includes("Windows NT 6.2")&&(t="8"),e.includes("Windows NT 6.1")&&(t="7"),e.includes("Windows NT 6.0")&&(t="Vista"),e.includes("Windows NT 5.1")&&(t="XP"),e.includes("Windows NT 5.0")&&(t="2000"),t},i=()=>/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"Tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"Mobile":"Desktop/Laptop",n=e=>new Promise(((t,i)=>{try{let n=document.createElement("script");n.src=e,n.onload=()=>{const i=setTimeout((()=>{t({status:!0,module:e}),clearTimeout(i)}),500)},n.onerror=()=>i({status:!1,module:e,message:"Script load error"}),document.body.appendChild(n)}catch(t){i({status:!1,module:e,message:t}),console.log("importDynamicModule err",t,e)}}));window.ReWebSDK.utils.importModule=e=>new Promise(((t,i)=>{const n=(window.ReWebSDK.configs.customFileBase||window.ReWebSDK.configs.custombase||"https://sdk.resu.io")+"/common/scripts"+e;try{let e=document.createElement("script");e.src=n+"?v="+window.ReWebSDK.build.version||"",e.onload=()=>{const e=setTimeout((()=>{t({status:!0,module:n}),clearTimeout(e)}),500)},e.onerror=()=>i({status:!1,module:n,message:"Script load error"}),document.body.appendChild(e)}catch(e){i({status:!1,module:n,message:e}),console.log("importModule err",e,n)}})),window.ReWebSDK.utils.importDynamicModule=n,window.ReWebSDK.utils.getCurrentSessionTimeSpent=()=>parseInt(((new Date).getTime()-parseInt(sessionStorage.getItem("Resul_initedAt")))/1e3),window.ReWebSDK.utils.getCurrentPageTimeSpent=()=>parseInt(((new Date).getTime()-parseInt(sessionStorage.getItem("Resul_pageinitedAt")))/1e3);const o=(...e)=>{if("true"==localStorage.getItem("debugWithConsoleLog"))return console.log(...e)};var s;window.console_log=o;var r=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;let a=_currentTenant.shortCode||"r35Ul=:";const d="Resul_data",l=a,c=new RegExp("r35Ul=:","g"),u=new RegExp(":lU53r==","g");function g(e,t){return new Promise((function(i,n){try{var o=r.open("resuldata",1);o.onupgradeneeded=function(){(s=o.result).objectStoreNames.contains("Res_Data")||s.createObjectStore("Res_Data",{keyPath:"key"})},o.onsuccess=function(){s=o.result;try{var r=s.transaction(["Res_Data"],"readwrite").objectStore("Res_Data").put({key:btoa(e),value:btoa(btoa(JSON.stringify(t)))});r.onsuccess=function(e){i("Added to database.")},r.onerror=function(e){n("error: "+e)}}catch(e){n("error: ")}}}catch(e){n("error: ")}}))}function p(e){return new Promise((function(t,i){try{var n=r.open("resuldata",1);n.onupgradeneeded=function(){(s=n.result).objectStoreNames.contains("Res_Data")||s.createObjectStore("Res_Data",{keyPath:"key"})},n.onsuccess=function(){s=n.result;try{if(s&&s.objectStoreNames.contains("Res_Data")){var o=s.transaction(["Res_Data"],"readwrite").objectStore("Res_Data").get(btoa(e));o.onsuccess=function(){let e=o.result;if(e&&e.value)try{e.value=JSON.parse(atob(atob(e.value))),t(e)}catch(e){i(e)}else i("Not found")},o.onerror=function(e){i(e)}}else i("obj store not found")}catch(e){console.trace(),i("getIDB err")}}}catch(e){i("getIDB err")}}))}var m=e=>{try{const t=CryptoJS.enc.Utf8.parse(e);return CryptoJS.enc.Base64.stringify(t)}catch(t){return btoa(e)}},f=e=>{try{const t=CryptoJS.enc.Base64.parse(e);return CryptoJS.enc.Utf8.stringify(t)}catch(t){return atob(e)}};var h=new class{getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):null}getItem(e){if(localStorage.getItem(d)){let t=localStorage.getItem(d);t=t.includes("r35Ul")?t.replace(c,"").replace(u,""):t.substring(a.length);let i="";try{i=JSON.parse(atob(t))[e]||null}catch(n){i=JSON.parse(f(t))[e]||null}return i}if(window.r35Ul){let t=window.r35Ul.includes("r35Ul")?window.r35Ul.replace(c,"").replace(u,""):window.r35Ul.substring(a.length),i="";try{i=JSON.parse(atob(t))[e]||null}catch(n){i=JSON.parse(f(t))[e]||null}return i}return null}setItem(e,t){let i=localStorage.getItem(d)||window.r35Ul||null,n="";try{n=JSON.parse(i?atob(i.includes("r35Ul")?i.replace(c,"").replace(u,""):i.substring(a.length)):"{}")}catch(e){n=JSON.parse(i?f(i.includes("r35Ul")?i.replace(c,"").replace(u,""):i.substring(a.length)):"{}")}n[e]=t;var o=JSON.stringify(n);try{localStorage.setItem(d,l+btoa(o)),window.r35Ul=l+btoa(o)}catch(e){localStorage.setItem(d,l+m(o)),window.r35Ul=l+m(o)}}setCookie(e,t,i={}){(i={path:"/",...i}).expires instanceof Date&&(i.expires=i.expires.toUTCString());let n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in i){n+="; "+e;let t=i[e];!0!==t&&(n+="="+t)}document.cookie=n}deleteCookie(e){this.setCookie("Resul_"+e,"",{"max-age":-1})}removeItem(e){let t=localStorage.getItem(d)||window.r35Ul||null,i="";try{i=JSON.parse(t?atob(t.includes("r35Ul")?t.replace(c,"").replace(u,""):t.substring(a.length)):"{}")}catch(e){i=JSON.parse(t?f(t.includes("r35Ul")?t.replace(c,"").replace(u,""):t.substring(a.length)):"{}")}delete i[e];var n=JSON.stringify(i);try{localStorage.setItem(d,l+btoa(n)),window.r35Ul=l+btoa(n)}catch(e){localStorage.setItem(d,l+m(n)),window.r35Ul=l+m(n)}}},w=new class{getItem(e){return window.sessionStorage.getItem(`Resul_${e}`)}setItem(e,t){return window.sessionStorage.setItem("Resul_"+e,t)}removeItem(e){return window.sessionStorage.removeItem(`Resul_${e}`)}},S=g,b=p,I=function(e,t,i,n){p("Res_Sdk_Failure_Api_List").then((s=>{if(s.value&&s.value.length){let r=[{rowId:i,url:e,bodyContent:t,status:!0,apiName:n}];r=[...r,...s.value],g("Res_Sdk_Failure_Api_List",r),o("Res_Sdk_Failure_Api_List:"+JSON.stringify(r))}})).catch((s=>{let r=[{rowId:i,url:e,bodyContent:t,status:!0,apiName:n}];g("Res_Sdk_Failure_Api_List",r),o("Res_Sdk_Failure_Api_List:"+JSON.stringify(r))}))},_=function(e){p("Res_Sdk_Failure_Api_List").then((t=>{if(t.value&&t.value.length){o("Res_Sdk_Failure_Api_List:"+JSON.stringify(t.value));let i=[...t.value];i=i.filter((t=>t.rowId!==e)),g("Res_Sdk_Failure_Api_List",i)}})).catch((t=>{o("Res_Sdk_Failure_Api_List: not found id:"+e)}))};const R=window._currentTenant;var D=new class{constructor(){this.pageStartTime,this.pageEndTime,this.difference,this.Device_Register="/DeviceRegister",this.Token_Register="/TokenRegister",this.Get_Profile_Id="/getProfileId",this.web_Campaign_Tracking="/webCampaignTracking",this.web_Campaign_Tracking_Bulk="/webCampaignTrackingBulk",this.get_Passport_Id="/getPassportId",this.User_Journey="/UserJourney",this.User_Journey_Bulk="/UserJourneybulk",this.User_Register="/UserRegister",this.User_Navigation="/UserNavigation",this.Custom_Events="/CustomEvents",this.Custom_Events_Bulk="/CustomEventsBulk",this.Custom_Events_Test="https://sdklb13.resu.io/Campaign/customeventstest",this.Conversion_Tracking="/ConversionTracking",this.Web_Conversion_Tracking="/WebConversionTracking",this.GoogleSmartUrl_ConversionTracking="/GoogleSmartUrlConversionTracking",this.Index_Insert_API="/submitLeadForm",this.get_ProfileByIPAddress="/getProfileByIPAddress",this.get_ProfileByDeviceID="/getProfileByDeviceID",this.get_ProfileByCustomID="/getProfileByCustomID",this.get_ProfileByPassportID="/getProfileByPassportID",this.get_NewProfileID="/getNewProfileID",this.get_CustomID="/GetCustomID",this.get_Res_CustomID="/GetResCustomID",this.get_device_details="/getdevicedetails",this.get_sdk_rules="/getsdkrules",this.IndexInsertBrandOwnData="/submitLeadForm",this.web_SDK_Blast="/webSDKBlast",this.User_Location_Update="/UserLocationUpdate",this.Get_Web_Captured_Fields_Client="/GetWebCapturedFieldsClient",this.Get_Web_Content_By_wncid_And_PageUrl="/GetWebContentBywncidAndPageUrl",this.get_Web_Carousel="/getWebCarousel",this.Get_Last_Visit="/GetLastVisitnew",this.Set_Last_Visit="/SetLastVisitnew",this.getSdkBaseUrl=()=>{let e="https://sdk.resu.io";try{e=new URL(document.querySelector('[src^="https://sdk.r"][defer="defer"]').src).origin}catch(t){e="https://sdk.resu.io"}try{"custombase"in window.ReWebSDK.configs&&(e=window.ReWebSDK.configs.custombase?new URL(window.ReWebSDK.configs.custombase).origin:e,o("base updated!"))}catch(e){o("getSdkBaseUrl: ",e)}return o("Current base url: ",e),e+"/Campaign"},this.Custom_Events_Test=()=>"https://sdklb13.resu.io/Campaign/customeventstest",this.RUN_Baseurl=this.getSdkBaseUrl(),this.BIZ_Baseurl="https://b.resu.io/Campaign",this.Team_Baseurl=this.getSdkBaseUrl(),this.environment=this.getSdkBaseUrl(),this.getBaseUrl=e=>{switch(this.environment){case"RUN":this.RUN_Baseurl;break;case"BIZ":this.BIZ_Baseurl;break;case"TEAM":this.Team_Baseurl;break;default:this.RUN_Baseurl}return this.getSdkBaseUrl()+e},this.saveForLaterRetry=(e,t)=>{let i=indexedDB.open("retryRequest",1);i.onupgradeneeded=()=>{let e=i.result;e.objectStoreNames.contains("requests")||e.createObjectStore("requests",{autoIncrement:!0})},i.onsuccess=()=>{i.result.transaction("requests","readwrite").objectStore("requests").add({data:e,options:t}).onsuccess=()=>{i.result.close()}}},this.tenantID=R?R.tenantId:window._currentTenant.tenantId,this._tenantID=R?R._tenantId:window._currentTenant._tenantId,this.Teamsdk_Baseurl=this.getSdkBaseUrl(),this.pushToken="",this.get=e=>new Promise(((t,i)=>{fetch(e,{mode:"no-cors"}).then((e=>e.ok?e.json():i(e))).then((e=>t(e)),(e=>i(e)))})),this.post=(e,t)=>new Promise(((i,n)=>{let o={method:"POST",body:JSON.stringify(t)};fetch(e,o).then((e=>e.ok?e.json():n(e))).then((e=>i(e)),(e=>n(e)))})),this.GetWebCapturedFieldsClient=(e,t)=>{var i=`${this.getSdkBaseUrl().replace("/Campaign","")}/EdmTrack${this.Get_Web_Captured_Fields_Client}?LinkUrl=${e}&clientId=${t}`;return this.get(i)},this.GetWebContentBywncidAndPageUrl=e=>{var t=`${this.getSdkBaseUrl()}/Notification${this.Get_Web_Content_By_wncid_And_PageUrl}/?wncid=${e}`;return this.get(t)},this.notificationModulePath=()=>{const e=window.ReWebSDK.configs;return`${e.customFileBase||e.custombase||"https://sdk.resu.io"}/Scripts/notificationModule.js`},this.socketsModulePath=()=>{const e=window.ReWebSDK.configs;return`${e.customFileBase||e.custombase||"https://sdk.resu.io"}/Scripts/socket.io.js`},this.GetConversionTracking=e=>`${this.getSdkBaseUrl().replace("/Campaign","")}/EdmTrack${this.Conversion_Tracking}?${e}`,this.GoogleSmartUrlConversionTracking=e=>`${this.getSdkBaseUrl().replace("/Campaign","")}/campaign${this.GoogleSmartUrl_ConversionTracking}?${e}`,this.getProfileByCustomID=e=>this.get(""),this.getProfileByIPAddress=e=>this.get(`${this.getBaseUrl(this.get_ProfileByIPAddress)}?tenantid=${this._tenantID}`),this.getWebCarousel=e=>this.get(`${this.getBaseUrl(this.get_Web_Carousel)}?id=${e}`),this.getProfileByDeviceID=(e,t)=>this.get(`${this.getBaseUrl(this.get_ProfileByDeviceID)}?tenantshortcode=${e}&deviceid=${t}`),this.getProfileByPassportID=(e,t)=>this.get(`${this.getBaseUrl(this.get_ProfileByPassportID)}?tenantshortcode=${e}&passportid=${t}`),this.getNewProfileID=e=>this.get(""),this.tokenRegister=e=>{var t=this.getBaseUrl(this.Token_Register);return this.post(t,e)},this.deviceRegister=e=>{var t=this.getBaseUrl(this.Device_Register);let i=Date.now();I(t,e,i,"deviceRegister");let n=this.post(t,e);return n.then((e=>{1==e.status&&_(i)})),n},this.getsdkrules=e=>{var t=this.getBaseUrl(this.get_sdk_rules);return this.post(t,e)},this.getProfileId=()=>{var e=this.getBaseUrl(this.Get_Profile_Id),t=window.ReWebSDK.utils.oSname+window.ReWebSDK.utils.oSVersion,i={deviceFingerPrint:h.getItem("_uuid"),passportID:h.getItem("Res_Passport_Id")||"",profileID:h.getItem("Res_Profile_Id")||"",tenantID:this._tenantID,deviceOS:t,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone};try{i.deviceBrowser=(new ClientJS).getBrowser()}catch(e){}return this.post(e,i)},this.rulesCacheList=e=>{var t=this.getBaseUrl(this.get_CustomID);return this.post(t,e)},this.getCustomID=e=>{var t=this.getBaseUrl(this.get_CustomID);return this.post(t,window._currentTenant.shortCode+"||"+e)},this.getResCustomID=e=>{var t=this.getBaseUrl(this.get_Res_CustomID);return this.post(t,window._currentTenant.shortCode+"||"+e)},this.inAppNotificationTracking=(e,t,i)=>{var n=this.getBaseUrl(this.web_Campaign_Tracking),o={...{action:e,status_code:t},profileId:h.getItem("Res_Profile_Id")||"",passportId:h.getItem("Res_Passport_Id")||"",tenantId:this._tenantID,deviceId:h.getItem("_uuid"),domainName:"5f7a2e8e_1bdb_4739_9d28_278a2759394c"==_currentTenant._tenantId?"https://"+location.hostname.replace("www.",""):location.hostname.replace("www.",""),id:i,status:t};let s=Date.now(),r=this.getBaseUrl(this.web_Campaign_Tracking_Bulk);I(r,o,s,"inAppNotificationTracking");let a=this.post(n,o);return a.then((e=>{1==e.status&&_(s)})),a},this.getPassId=e=>{var t=this.getBaseUrl(this.get_Passport_Id),i={...e,uniqueId:e.uniqueId,tenantId:this._tenantID,name:e.name,age:e.age,gender:e.gender,phone:e.phone,email:e.email,profileUrl:e.profileUrl||"",dob:e.dob||""};return this.post(t,i)},this.getdevicedetails=e=>{var t=this.getBaseUrl(this.get_device_details);return this.post(t,e)},this.create_UUID=()=>{var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)}))},this.UserJourneyScreens=()=>{let e=null,t="";try{this.pageStartTime=w.getItem("pageStartTime"),console.log("LOG: Page Start Time: ",this.pageStartTime),this.pageEndTime=new Date((new Date).toUTCString()).toISOString().split(".")[0],console.log("LOG: Page End Time: ",this.pageEndTime),this.difference=(new Date(this.pageEndTime)-new Date(this.pageStartTime))/6e4,console.log("LOG: Difference: ",this.difference),this.difference>2&&(w.setItem("ujId",this.create_UUID()),window.ReWebSDK.utils.postItem("sessionId",w.getItem("ujId")),console.log("LOG: new session ID ",w.getItem("ujId")),console.log("LOG: Page Start Time: ",this.pageStartTime),this.pageEndTime=this.pageStartTime),e=window.performance.timing,t=(e.loadEventEnd-e.navigationStart)/1e3}catch(e){o("unable to get load time",e)}const i={pageReferral:sessionStorage.getItem("referrer")||document.referrer||location.origin,urlReferral:sessionStorage.getItem("referrer")||document.referrer||location.origin,pageStartTime:this.pageStartTime,pageUrl:localStorage.getItem("lastLocation")?localStorage.getItem("lastLocation"):location.href,pageEndTime:this.pageEndTime,pageDuration:w.getItem(sessionStorage.getItem("referrer")||location.origin+"/"),pageScrolled:sessionStorage.getItem("Resul_s_percentage"),pageLoadTime:t,queryString:"",metaData:{...this.getMetaData(),title:document.title},campaignId:w.getItem("Res_campaing")||"",channelId:window.location.href.includes("pid")||window.location.href.includes("rid")?w.getItem("Res_ChannelId"):"",fieldTrack:JSON.parse(h.getItem("fieldCapture")||"[]")};let n=JSON.parse(h.getItem("ujScreens"))||[];n.push(i),h.setItem("ujScreens",JSON.stringify(n))},this.UserJourneyDeviceAttributeSet=()=>({deviceId:window.ReWebSDK.utils.LSH.getItem("_uuid"),domainName:document.domain,tCode:window._currentTenant.shortCode,deviceType:window.ReWebSDK.utils.LSH.getItem("dtype")||"unknown",deviceModel:"",manufacture:"",language:navigator.language||"unknown",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screenResolution:window.screen.width+"x"+window.screen.height,osType:window.ReWebSDK.utils.oSname,version:window.ReWebSDK.utils.oSVersion,ipAddress:sessionStorage.getItem("clientIProtocol"),isNotificationEnabled:window.ReWebSDK.userRegister_payloadDefault.isPushEnabled,bCode:JSON.parse(ReWebSDK.utils.LSH.getCookie("ResData"))&&JSON.parse(ReWebSDK.utils.LSH.getCookie("ResData"))[0].bid||"",did:JSON.parse(ReWebSDK.utils.LSH.getCookie("ResData"))&&(JSON.parse(ReWebSDK.utils.LSH.getCookie("ResData"))[0].Dpid||JSON.parse(ReWebSDK.utils.LSH.getCookie("ResData"))[0].Did)||"",passportId:h.getItem("Res_Passport_Id")||"",visitorsType:window.ReWebSDK.utils.LSH.getItem("visitedCount")>1?"Identified return visit":"Identified first visit"}),this.UserJourneyAttributeSet=()=>{let e,t;try{if(window.ReWebSDK.utils.LSH.getItem("currentGeoLocation")){let i=JSON.parse(window.ReWebSDK.utils.LSH.getItem("currentGeoLocation"));e=i.latitude,t=i.longitude}}catch(e){o("current geolocation issue",e)}return{deviceId:window.ReWebSDK.utils.LSH.getItem("_uuid"),domainName:document.domain,tCode:window._currentTenant.shortCode,userType:window.ReWebSDK.utils.LSH.getItem("Res_Profile_Id")!==window.ReWebSDK.utils.LSH.getItem("Res_Passport_Id")?"identified":"known",sessionId:ReWebSDK.utils.SSH.getItem("ujId"),latitude:e||"",longitude:t||"",lastTimeSpent:ReWebSDK.utils.LSH.getItem("lastPageTimeSpent"),lastSessionTime:ReWebSDK.utils.LSH.getItem("lastSessionTimeSpent"),screenViews:window.ReWebSDK.utils.SSH.getItem("appViewsPerSession"),pageUrl:window.location.href,lastVisitedPageUrl:localStorage.getItem("lastLocation"),token:window.ReWebSDK.userRegister_payloadDefault.deviceToken,webSiteOpenedDate:sessionStorage.getItem("Resul_initedDateAt"),webSiteClosedDate:ReWebSDK.utils.LSH.getItem("Resul_endDateAt"),timeSpentOnScreen:window.ReWebSDK.utils.getCurrentPageTimeSpent(),sessionDuration:window.ReWebSDK.utils.getCurrentSessionTimeSpent(),Login:ReWebSDK.utils.LSH.getItem("Res_userLoggedIn")||!1,bCode:JSON.parse(window.ReWebSDK.utils.LSH.getCookie("ResData"))&&JSON.parse(window.ReWebSDK.utils.LSH.getCookie("ResData"))[0].bid||"",did:JSON.parse(window.ReWebSDK.utils.LSH.getCookie("ResData"))&&(JSON.parse(window.ReWebSDK.utils.LSH.getCookie("ResData"))[0].Dpid||JSON.parse(window.ReWebSDK.utils.LSH.getCookie("ResData"))[0].Did)||"",passportId:h.getItem("Res_Passport_Id")||"",campaignName:"",campaignReferral:"",campaignId:window.ReWebSDK.utils.SSH.getItem("Res_campaing")||"",campaignChannel:JSON.parse(window.ReWebSDK.utils.LSH.getCookie("ResData"))&&(JSON.parse(window.ReWebSDK.utils.LSH.getCookie("ResData"))[0].Chnl||JSON.parse(window.ReWebSDK.utils.LSH.getCookie("ResData"))[0].chnl)||""}},this.UserJourneyResumeDetails=()=>({id:window.ReWebSDK.utils.LSH.getItem("mappingId"),source:"web",url:window.location.href}),this.UserJourneyBulk=e=>{const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{},i=this.getBaseUrl(this.User_Journey_Bulk),n="4g"==t.effectiveType?"true"==h.getItem("IsMobile")&&"4g"==t.effectiveType?"4g":"Wifi":t.effectiveType,s=this.UserJourneyDeviceAttributeSet(),r=this.UserJourneyAttributeSet(),a=this.UserJourneyResumeDetails();try{w.getItem("ujId")||w.setItem("ujId",this.create_UUID())}catch(e){}let d={profileId:h.getItem("Res_Profile_Id")||"",passportId:h.getItem("Res_Passport_Id")||"",tenantId:this._tenantID,domainName:"5f7a2e8e_1bdb_4739_9d28_278a2759394c"==_currentTenant._tenantId?"https://"+location.hostname.replace("www.",""):location.hostname.replace("www.",""),deviceId:h.getItem("_uuid"),deviceFingerPrint:h.getItem("_uuid"),pageUrl:window.location.href,duration:ReWebSDK.utils.getCurrentSessionTimeSpent(),campaignId:window.location.href.includes("pid")||window.location.href.includes("rid")?w.getItem("Res_campaing"):"",channelId:window.location.href.includes("pid")||window.location.href.includes("rid")?w.getItem("Res_ChannelId"):"",deviceIp:sessionStorage.getItem("clientIProtocol"),deviceTimeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,deviceType:h.getItem("dtype")||"unknown",isPushEnabled:ReWebSDK.userRegister_payloadDefault.isPushEnabled,UserDuration:ReWebSDK.utils.getCurrentSessionTimeSpent(),isBluetoothEnabled:!1,isNotification:"granted"==Notification.permission,isWifiEnabled:"Wifi"==n,nFCEnabled:"",locationAccuracyType:!1,networkType:n||"unknown network",language:navigator.language||"unknown",location:h.getItem("Location"),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,networkProvider:h.getItem("Isp"),currency:h.getItem("Currency"),sessionId:w.getItem("ujId"),campaignUrl:window.location.href.includes("pid")||window.location.href.includes("rid")?window.location.href:"",visitorCount:h.getItem("visitedCount"),screens:e,deviceAttribute:s,journeyAttribute:r,resumeJourney:a,uniqueId:h.getItem("uniqueId")||""};o("uj bulk: ",d);let l=Date.now();I(i,d,l,"userJourneybulk");let c=this.post(i,d);return c.then((e=>{1==e.status&&(_(l),this.difference>2&&(this.pageStartTime=new Date((new Date).toUTCString()).toISOString().split(".")[0],this.difference=0)),h.setItem("ujScreens","[]")})),c},this.UserRegistration=e=>{var t=this.getBaseUrl(this.User_Register),i={...ReWebSDK.userRegister_payloadDefault,...e};return h.setItem("Res_userLoggedIn",!0),this.post(t,i)},this.UserNavigation=e=>{this.getBaseUrl(this.User_Navigation)},this.customEvent=e=>{payload={profileID:h.getItem("Res_Profile_Id")||"",passportId:h.getItem("Res_Passport_Id")||"",tenantId:this._tenantID,deviceId:h.getItem("_uuid"),domainName:"5f7a2e8e_1bdb_4739_9d28_278a2759394c"==_currentTenant._tenantId?"https://"+location.hostname.replace("www.",""):location.hostname.replace("www.",""),sessionId:w.getItem("ujId"),eventName:e};let t=Date.now(),i=this.getBaseUrl(this.Custom_Events_Bulk);I(i,payload,t,"custEvent");let n=this.post("http://10.200.1.23:7511/Campaign/CustomEvents",payload);return n.then((e=>{1==e.status&&_(t)})),n},this.WebConversionTracking=(e,t)=>{var i=this.getBaseUrl(this.Web_Conversion_Tracking),n={profileID:h.getItem("Res_Profile_Id")||"",passportId:h.getItem("Res_Passport_Id")||"",tenantId:this._tenantID,deviceId:h.getItem("_uuid"),domainName:"5f7a2e8e_1bdb_4739_9d28_278a2759394c"==_currentTenant._tenantId?"https://"+location.hostname.replace("www.",""):location.hostname.replace("www.",""),sessionId:w.getItem("ujId"),...e,data:t?JSON.stringify(t):""};return this.post(i,n)},this.webSDKBlast=(e,t=!1)=>{var i=this.getBaseUrl(this.web_SDK_Blast);i.includes("teamsdk.resulticks.net")&&(i="https://resulblastapi.resulticks.team/api/BlastingApi/WebSDKBlast");let n=Date.now();I(i,e,n,"webSDKBlast");let o=this.post(i,e);return o.then((e=>{1==e.status&&_(n)})),o},this.clientCustomEvent=e=>{var t=this.getBaseUrl(this.Custom_Events),i={...e,deviceId:h.getItem("_uuid"),pageUrl:window.location.href,profileID:h.getItem("Res_Profile_Id")||h.getItem("_uuid"),passportId:h.getItem("Res_Passport_Id")||"",sessionId:w.getItem("ujId"),domainName:location.hostname.replace("www.",""),tenantId:this._tenantID};return this.post(t,i)},this.formDataCapture=e=>{var t=`${this.getSdkBaseUrl()}${this.Index_Insert_API}`;let i=Date.now();I(t,e,i,"submitLeadForm");let n=this.post(t,e);return n.then((e=>{1==e.status&&_(i)})),n},this.formDataCaptureLocal=(e,t)=>this.post(e,t),this.UserLocationUpdate=e=>{var t=this.getBaseUrl(this.User_Location_Update),i={profileID:h.getItem("Res_Profile_Id")||"",passportId:h.getItem("Res_Passport_Id")||"",tenantId:this._tenantID,deviceId:h.getItem("_uuid"),domainName:"5f7a2e8e_1bdb_4739_9d28_278a2759394c"==_currentTenant._tenantId?"https://"+location.hostname.replace("www.",""):location.hostname.replace("www.",""),...e};return this.post(t,i)},this.getMetaData=()=>{for(var e=new Object,t=document.getElementsByTagName("META"),i=0,n=t.length;i<n;i++)"description"!=t[i].name&&"Description"!=t[i].name&&"keywords"!=t[i].name&&"Keywords"!=t[i].name&&"og:title"!=t[i].name&&"og:description"!=t[i].name&&"og:title"!=t[i].property&&"og:description"!=t[i].property||(e[t[i].name]=t[i].content);return e},this.resumeJourney=e=>{var t=this.getBaseUrl(this.Set_Last_Visit);return this.post(t,e)},this.getLastVisit=e=>{var t=this.getBaseUrl(this.Get_Last_Visit);return this.post(t,e)}}};const v=window._currentTenant;var y=new class{constructor(){this.ocg="",this.bpid="",this.cpid="",this.spid="",this.dpid="",this.dbid="",this.tpid="",this.rpid="",this.chnlp=""}createCookie(e,t,i){if(i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var s=";domain="+window.location.hostname+";expires="+n.toGMTString()}else s="";document.cookie=e+"="+t+s+";path=/",o("cookie stored")}readCookie(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}getUrlVars(){var e,t=[],i="";const n=decodeURIComponent,s=n(window.location.href);if(o(`did available: ${s.includes("did")} , cid available: ${s.includes("cid")}, utm_resul available: ${s.includes("utm_resul")}`),s.includes("?")&&s.includes("did")&&s.includes("cid")||s.includes("utm_resul")||s.includes("resulid")){try{let e=n(window.location.href).slice(window.location.href.indexOf("?")+1);i=e.includes("?")?e.split("?")[1].split("&"):e.split("&")}catch(e){let t=window.location.href.slice(window.location.href.indexOf("?")+1);i=t.includes("?")?t.split("?")[1].split("&"):t.split("&")}o("hashes",i);for(var r=0;r<i.length;r++)if((e=i[r].split("="))[0].includes("pid")&&h.setItem("Res_Passport_Id",e[1]),e[0].includes("rid")&&e[1]&&h.setItem("Res_Passport_Id",e[1]),e[0].includes("resulid")){if(e[1]){const i=atob(e[1].substring(3)).split("|"),n=e[1].substring(0,3);h.setItem("Res_Passport_Id",i[3]),o("passport_id fetched: ",h.getItem("Res_Passport_Id")),t[e[0]]=e[1],t.tenantScode=n}}else e[0].includes("resul")&&!e[0].includes("utm_resul")||(t.push(e[0]),t[e[0]]=e[1])}return o("vars",t),t}fnSetCookie(e,t){o("fnSetCookie ",t);0==t&&((()=>{if(location.href.includes("did")&&this.getUrlVars().did.length>5){o("checking:did",this.getUrlVars().did);var t=[{Did:this.getUrlVars().did,Dpid:this.getUrlVars().bid,Tid:this.getUrlVars().tid,Bid:this.getUrlVars().bsid,Cid:this.getUrlVars().cid,Sid:this.getUrlVars().sid,Rid:null!=this.getUrlVars().rid?this.getUrlVars().rid:this.getUrlVars().pid,Chnl:this.getUrlVars().chl,Dtx:new Date,Pid:this.getUrlVars().pid}];o("jsonDT.Did",t),null!=t[0].Rid&&(this.createCookie(e,JSON.stringify(t),30),o("cookie created",0))}else if(location.href.includes("utm_resul")){const t=h.getItem("Res_Passport_Id")||"",i=h.getItem("Res_Profile_Id")||"",n=this.getUrlVars().utm_resul;o("utm_resul: ",n);const s=[{Did:n.slice(0,3),Dpid:n.slice(3,4),Tid:null,Bid:null,Cid:n.slice(4,7),Sid:n.slice(8,10),Rid:t==i?i:t,Chnl:n.slice(7,8),Dtx:new Date,Pid:null}];o("jsonDT",s),this.createCookie(e,JSON.stringify(s),30)}else if(location.href.includes("resulid")){const t=this.getUrlVars().resulid,i=atob(t.substring(3)).split("|");o("checking resulid: ",t,i);const n=[{Did:this.getUrlVars().tenantScode,Dpid:"",Tid:null,Bid:i[0],Cid:i[1],Sid:i[4],Rid:i[3],Chnl:i[2],Dtx:new Date,Pid:null}];o("jsonDT",n),this.createCookie(e,JSON.stringify(n),30)}else{o("checking:did",this.getUrlVars().did);t=[{Did:this.getUrlVars().did,Dpid:this.getUrlVars().bid,Tid:this.getUrlVars().tid,Bid:this.getUrlVars().bsid,Cid:this.getUrlVars().cid,Sid:this.getUrlVars().sid,Rid:null!=this.getUrlVars().rid?this.getUrlVars().rid:this.getUrlVars().pid,Chnl:this.getUrlVars().chl,Dtx:new Date,Pid:this.getUrlVars().pid}];o("jsonDT.Did",t),null!=t[0].Rid&&(this.createCookie(e,JSON.stringify(t),30),o("cookie created",0))}})(),o("Fetching data from url"))}JsonSort(e){return e.sort(((e,t)=>{var i=new Date(e.Dtx),n=new Date(t.Dtx);return i>n?-1:i<n?1:0}))}fnTrackUrlwithData(e){try{e.cpuType=(new ClientJS).getCPU();window.location.href.split("?");e.urlreferrer=window.location.hostname,e.domainurl=window.location.href,e.bpid=this.bpid,e.tpid=this.tpid,e.cpid=this.cpid,e.spid=this.spid,e.dpid=""==this.dpid?"0":this.dpid,e.profileID=h.getItem("Res_Profile_Id")||"",""!=e.rpid&&null!=e.rpid||(e.rpid=this.rpid),e.chnlp=this.chnlp,D.UserNavigation(e).then((e=>o("userNavigation response:",e))).catch((e=>o(this,"userNavigation reject:",e)))}catch(e){}}fnTrackUrl(e){try{var t;o("fnTrackUrl called"),e="ResData",this.fnSetCookie(e,0);var i=this.readCookie(e);if(o("readCookie: cookievalue:",i),null!=i){var n=JSON.parse(i),s=this.JsonSort(n)[0],r=s.Cid,a=s.Dpid||s.Bid,d=s.Tid,l=s.Bid,c=s.Sid,u=s.Did,g=s.Pid;g||(g=s.Rid),g||n.forEach((e=>{"Rid"in e&&(g=e.Rid)})),g||(g=h.getItem("Res_Passport_Id")||""),this.bpid=l,this.cpid=r,w.setItem("Res_campaing",r),this.spid=c,this.dpid=a||l,this.dbid=u,this.rpid=g,this.tpid=d;var p=s.Chnl;this.chnlp=s.Chnl,w.setItem("Res_ChannelId",s.Chnl);s.Dtx;var m=window.location,f=m.protocol+"//"+m.host+m.pathname;if(null!=i&&(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o("cid,did",r,u),null!=r&&null!=u))if(3==r.length&&3==u.length&&location.href.includes("utm_resul")){o("GoogleSmartUrlConversion tracking on");const e="cid="+r+"&sid="+c+"&did="+u+"&rid="+g+"&chl="+p+"&pUrl="+f+"&bid="+a;o("query",e);const i=D.GoogleSmartUrlConversionTracking(e);t.open("GET",i,!0),t.send()}else if(!location.href.includes("utm_resul")){null!=g&&""!=g&&null!=g||(g=h.getItem("Res_Profile_Id")),(null==p||""==p||null==p||"WN"==p)&&(p="wp"),o("conversion tracking on");const e="cid="+r+"&sid="+c+"&did="+u+"&rid="+g+"&chl="+p+"&pUrl="+f+"&bid="+a,i=D.GetConversionTracking(e);if(window.location.hostname.includes("tangeroutlet.com"))try{document.getElementById("submit").onclick=()=>{this.conversionTracking()},o("cta targeted")}catch(e){o("cta target err: ",e)}t.open("GET",i,!0),t.send()}}else o("conversion tracking suspended!")}catch(e){o("fnTrackUrl: ",e)}}conversionTracking(e){const t="ResData";null==this.readCookie(t)?this.fnSetCookie(t,0):this.fnSetCookie(t,1);var i=this.readCookie(t);if(null!=i){var n=JSON.parse(i),s=this.JsonSort(n)[0],r=s.Cid,a=s.Dpid,d=s.Tid,l=s.Bid,c=s.Sid,u=s.Did,g=s.Pid;null==g&&(g=s.Rid),null==g&&n.forEach((e=>{"Rid"in e&&(g=e.Rid)})),this.bpid=l,this.cpid=r,w.setItem("Res_campaing",r),this.spid=c,this.dpid=a,this.dbid=u,this.rpid=g,this.tpid=d;var p=s.Chnl;this.chnlp=s.Chnl,w.setItem("Res_ChannelId",s.Chnl),o("depid = jsonDataValue.Dpid",a,s.Dpid),s.Dtx;var m=window.location;if(m.protocol,m.host,m.pathname,null!=i){null!=g&&""!=g&&null!=g||(g=h.getItem("Res_Profile_Id")),null!=p&&""!=p&&null!=p||(p="wp");let t={cid:r,bid:l||s.Dpid||"",sid:c,did:"rpt_"+v._tenantId,rid:g,eventName:"conversion",goal:!0,pUrl:"converted",chl:p,osType:window.ReWebSDK.utils.oSname||""};D.WebConversionTracking(t,e)}}}fieldtrackdata(e){e.bpid=this.bpid,e.cpid=this.cpid,e.spid=this.spid,e.dpid=this.dpid,e.dbid="cust_"+handlers.getdbId().replace(/-/g,"_"),e.tpid=this.tpid,e.rpid=this.rpid,e.chnlp=this.chnlp,JSON.stringify(e);var t=JSON.parse(e.fieldtrackdata);const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};t.length&&fetch("https://sdk.resu.io/Notification/InsertWebFieldTrackData",i).then((e=>{}))}};const C=window._currentTenant;let k=[];function W(){try{if(!("serviceWorker"in navigator)||"34148bea_e202_4b36_826d_95d492ecc55b"==window._currentTenant._tenantId&&"granted"!=Notification.permission)o("Notificationjs :: this browser doesn't support push notification");else{let t=0;function e(){o("Notificationjs :: ReWebSDK.pushConfig",ReWebSDK.pushConfig),window.firebase.initializeApp(ReWebSDK.pushConfig);const e=firebase.messaging();navigator.serviceWorker.addEventListener("message",(e=>{if(o("Notificationjs :: iscarousel check",e),"firebase-messaging-msg-data"in e.data){let t="";o("Notificationjs :: fcmd",e.data["firebase-messaging-msg-data"].data),e.data["firebase-messaging-msg-data"].data.resul?(t=JSON.parse(atob(e.data["firebase-messaging-msg-data"].data.resul.substring(4))),t.resul&&(t=JSON.parse(atob(t.resul.substring(4))))):t=e.data["firebase-messaging-msg-data"].data,o("Notificationjs :: iscarousel check",t),o("Notificationjs :: ","IsCarousel"in t,"inAppNotification"in t,"true"==t.inAppNotification),"IsCarousel"in t&&"inAppNotification"in t&&"true"==t.inAppNotification?(o("is carousel"),w.getItem("isCarouselShown")||"true"!=t.IsCarousel&&1!=t.IsCarousel?w.getItem("inAppShown")||"false"!=t.IsCarousel&&0!=t.IsCarousel||(n({data:t}),w.setItem("inAppShown",!0)):(o("is carousel true"),window.ReWebSDK.utils.importModule("/carouselNotification.js").then((e=>{if(window.carouselNotification){w.setItem("isCarouselShown",!0);(0,window.carouselNotification)(t.id,t.placement)}})))):!w.getItem("inAppShown")&&t&&"true"==!!t.inAppNotification?(n({data:t}),w.setItem("inAppShown",!0)):s({data:t})}else try{let t=e.resul?JSON.parse(atob(e.resul.substring(4))):e.data.msg;o("Notificationjs :: nData",t),o("Notificationjs :: nData","IsCarousel"in t),o("Notificationjs :: nData",!("true"!=t.inAppNotification)),o("carousel check: nData.IsCarousel: ",t.IsCarousel),t&&(o("Notificationjs ::","IsCarousel"in t),"IsCarousel"in t?(o('Notificationjs :: "IsCarousel" processed',!w.getItem("isCarouselShown"),"true"==t.IsCarousel||1==t.IsCarousel),w.getItem("isCarouselShown")||"true"!=t.IsCarousel&&1!=t.IsCarousel?w.getItem("inAppShown")||"false"!=t.IsCarousel&&0!=t.IsCarousel||(n({data:t}),w.setItem("inAppShown",!0)):(o("carousel session store, import"),w.setItem("isCarouselShown",!0),window.ReWebSDK.utils.importModule("/carouselNotification.js").then((e=>{if(window.carouselNotification){w.setItem("isCarouselShown",!0);(0,window.carouselNotification)(t.id,t.placement)}})))):w.getItem("inAppShown")||"true"!=t.inAppNotification?"false"==!!t.inAppNotification&&s({data:t}):(o("Notificationjs :: nData inapp calling"),n({data:t}),w.setItem("inAppShown",!0)))}catch(e){}}));const i={};function n(e){if(o("showInApp called: ",e),i.id&&i.id==e.id)return!1;const t=e.data.id;let n="";if(e.data.ttl){n=new Date(new Date(e.data.ttl).toUTCString()).toISOString().split(".")[0];const i=new Date((new Date).toUTCString()).toISOString().split(".")[0];if(new Date(i)>new Date(n))return D.inAppNotificationTracking("expired","1",t).then((e=>{})),!1}if(document.getElementById("ResulticksPagePush-container"))navigator.serviceWorker.getRegistrations().then((e=>{e.length}));else{const i=()=>{if(window.inAppNotification)try{D.inAppNotificationTracking("received","5",t).then((e=>{}));let i=window.inAppNotification(e);const{placement:s,overlay:r,isOverlay:a,overlayColor:d,overlayOpacity:l,options:c,title:u,titleColor:g,bodyColor:p,contentBgColor:m,click_actions:f,actions:h,edmContent:S}=e.data;o("Notificationjs :: edmContent.data",S);const b=JSON.parse(c);let I={placement:s,inAppNotificationBgColor:m,titleColor:g,bodyColor:p,isOverlay:a,overlay:r,overlayColor:d,overlayOpacity:l,ttl:n,text:b.body,title:u};if(f&&(I.click_actions=f),b.hasOwnProperty("type")){switch(b.type){case"image":b.hasOwnProperty("url")&&(I.image=b.url);break;case"video":b.hasOwnProperty("url")&&(I.video=b.url);break;case"edm":b.hasOwnProperty("url")&&(I.edm=b.url);break;case"banner":b.hasOwnProperty("body")&&(I.banner=b.placement)}b.hasOwnProperty("icon")&&(I.icon=b.icon)}if("html"==b.type){if(!localStorageHandler.getItem("RegDialogShown")){w.setItem("html_inapp");const e='<dialog id="RegDialog" style="border: none;box-shadow: 1px 1px 8px #666;border-radius: 3px;padding: 0px;font-family: sans-serif;width: 600px;color: #5a5858;    position: fixed;z-index:10010;\n                                top: 0;\n                                bottom: 0;\n        width:500px;\n        left: 0;\n                                right: 0;" open="">\n        <div style="padding: 30px;position:relative;">\n        \n                                <div style="margin-bottom: 5px;"><img src="https://svb.resulticks.net/Images/industry-logo.png" style=" margin-top: -15px; "></div>\n                                    <form method="dialog" id="user-dialog">\n                                    <p style="font-size:18px;margin-bottom: 0;">Not Ready to sign up today? Enter your email </p>\n                                    <p style="color: #0289ea;font-size:18px;margin-top: 10px;font-weight: 600;">we\'ll send you a surprice</p>\n                                        <p>\n                                            <label style="width:100%">Phone number: <input type="text" name="phoneNumber" style="display: block;\n                            height: 32px;\n                            margin-top: 5px;\n                            width: 100%;\n                            padding: 0 5px;\n                            border: 1px solid #ccc;\n                            border-radius: 3px;\n                        "> </label>\n                                                                </p>\n                                                                <div style="padding:2px">\n                                                                    <button id="confirmBtn" value="default" style="\n                            background: #0059b5;\n                            color: #fff;\n                            border: none;\n                            padding: 10px 20px;\n                            font-size: 16px;\n                            border-radius: 3px;\n                            cursor: pointer;\n                        ">Register</button> \n                        \n                        <button style="padding-left:15px;background: #fff;border: 1px solid #ccc;border-radius: 50%;position: absolute;top: -15px;right: -15px;box-shadow: 1px 1px 6px #666;    line-height: 0 !important;\n                        padding: 18px;\n                        font-size: 18px;\n                        height: 15px;\n                        width: 15px;line-height: 0 !important;\n                        padding: 15px;\n                        font-size: 18px;\n                        height: 15px;\n                        width: 15px;\n                        display: flex !important;\n                        justify-content: center !important;    align-items: center !important;\n                        cursor: pointer;">x</button>\n                                                                </div>\n                                                            </form>\n        </div>\n                                                        </dialog>';document.getElementsByTagName("body")[0].insertAdjacentHTML("afterbegin",e),document.getElementById("RegDialog").addEventListener("close",(()=>(sessionStorage.removeItem("html_inapp"),void resumeHandler.init()))),localStorageHandler.setItem("RegDialogShown",!0)}return!1}if(h&&(I.actions=JSON.parse(h)),k.includes(t))return console.warn("InappMessage with sameId blocked."),!1;k.push(t),i.show(I,t)}catch(e){o("Notificationjs :: inapp load err:",e)}};document.querySelector('script[src*="inAppNotification.js"]')?i():window.ReWebSDK.utils.importModule("/inAppNotification.js").then((e=>{i()}))}}function s(e){if(o("Notificationjs :: onMessage: ",e),"data"in e){const t=e=>{const t={...e,profileID:h.getItem("Res_Profile_Id")||"",passportId:h.getItem("Res_Passport_Id")||"",_tenantId:C._tenantId,domainName:location.hostname.replace("www.",""),deviceId:h.getItem("_uuid"),event:"customMsgEvent"};navigator.serviceWorker.getRegistrations().then((e=>{e.length&&e[0].active.postMessage(t)}))};if(e.data.ttl){const t=e.data.ttl,i=new Date((new Date).toUTCString()).toISOString().split(".")[0];if(new Date(i)>=new Date(t))return o("Notificationjs :: onMessage notification expired!"),!1}!function(e){ReWebSDK.utils.fetchItem("ResNotification").then((t=>{t=t.value,o("Notificationjs :: ResNotification",t),t.length>14?(t.shift(),t.push(e)):t.push(e),ReWebSDK.utils.postItem("ResNotification",t).then((e=>{})).catch((e=>{o("unable to store notification",e)}))}),(t=>{ReWebSDK.utils.postItem("ResNotification",[e]).then((e=>{})).catch((e=>{o("unable to store notification",e)}))})).catch((e=>{o("unable to fetch notification",e)}))}(e),"IsCarousel"in e.data?"true"==e.data.IsCarousel||1==e.data.IsCarousel?window.ReWebSDK.utils.importModule("/carouselNotification.js").then((t=>{if(window.carouselNotification){(0,window.carouselNotification)(e.data.id,e.data.placement)}})):"true"!=e.data.inAppNotification||"false"!=e.data.IsCarousel&&0!=e.data.IsCarousel?t(e):n(e):"true"==e.data.inAppNotification?n(e):t(e)}}var r=0;function a(){if(!w.getItem("tokenSuccess")&&Number(w.getItem("nTimes")||0)<3){const e=setTimeout((function(){const t=h.getItem("Token"),i=`${ReWebSDK.pushHeaderKey};${ReWebSDK.pushConfig.messagingSenderId};${t}`,n=window.ReWebSDK.userRegister_payloadDefault.deviceTokenOld||h.getItem("OldToken")||i,s={profileID:h.getItem("Res_Profile_Id")||"",passportId:h.getItem("Res_Passport_Id")||"",tenantId:C._tenantId,domainName:location.hostname.replace("www.",""),deviceId:h.getItem("_uuid"),deviceToken:i.length>300?i:"",deviceTokenOld:n||i,deviceType:h.getItem("dtype")||"unknown",deviceOs:window.ReWebSDK.utils.oSname||"unknown",browserName:window.ReWebSDK.utils.browserName,isPushEnabled:"true",uniqueId:h.getItem("uniqueId")||""};D.tokenRegister(s).then((e=>{window.dispatchEvent(new CustomEvent("resul_notificationGranted")),w.setItem("tokenSuccess",!0);try{h.setItem("mappingId",(e.deviceDomainMapID||document.domain)+(new URLSearchParams(location.href).get("rid")||h.getItem("Res_Passport_Id")))}catch(e){}const t=setTimeout((()=>{sessionStorage.removeItem("Resul_userRegisterTokenForced"),clearTimeout(t)}),3e3)}),(e=>{a(),o("Notificationjs :: err",e)})),w.setItem("nTimes",r++),clearTimeout(e)}),1e3)}}try{window.ReWebSDK.methods.tokenRegisterApi_force=function(){o("Notificationjs :: tokenRegisterApi_force called"),sessionStorage.removeItem("Resul_tokenSuccess"),w.setItem("nTimes",0),h.getItem("Token")&&a()}}catch(e){}const d=()=>{o("Notificationjs :: registerResulNotification called"),navigator.serviceWorker.getRegistrations().then((i=>{let n=window.ReWebSDK.serviceWorkerFile;0==n.indexOf("~")&&(n=n.slice(1)),0==n.indexOf("/")&&(n=n.slice(1)),o("Notificationjs :: Targeted serviceworkerFile: ",n),navigator.serviceWorker.register(`/${n}`).then((i=>{e.useServiceWorker(i),function i(){try{e.requestPermission().then((function(){return o("Notificationjs :: Permission requested"),e.getToken()})).then((function(i){window.ReWebSDK.updateSDKToken(i),window.ReWebSDK.userRegister_payloadDefault.isPushEnabled="true",window.ReWebSDK.userRegister_payloadDefault.deviceToken=i,w.getItem("Tokenregister")&&h.getItem("Token")==i||(h.setItem("Token",i),h.setItem("DToken",`${ReWebSDK.pushHeaderKey};${ReWebSDK.pushConfig.messagingSenderId};${i}`),a(),window.ReWebSDK.tokenReset=function(){try{if(h.getItem("Token")){let i=function(){o("Notificationjs :: fetching new token..."),h.setItem("OldToken",`${ReWebSDK.pushHeaderKey};${ReWebSDK.pushConfig.messagingSenderId};${h.getItem("Token")}`),e.requestPermission().then((function(){return o("Notificationjs :: Permission requested"),e.getToken()})).then((function(e){h.setItem("Token",e),h.setItem("DToken",`${ReWebSDK.pushHeaderKey};${ReWebSDK.pushConfig.messagingSenderId};${e}`),window.ReWebSDK.userRegister_payloadDefault.isPushEnabled="true",window.ReWebSDK.userRegister_payloadDefault.deviceToken=e;try{window.ReWebSDK.methods.tokenRegisterApi_force()}catch(e){sessionStorage.removeItem("Resul_tokenSuccess"),w.setItem("nTimes",0),a()}})).catch((function(e){t++,o("Notificationjs :: err on token reset, retrying... ",t);const n=setTimeout((function(){i(),clearTimeout(n)}),1e3*t)}))};!function e(){firebase.messaging().deleteToken(h.getItem("Token")).then((e=>{o("Notificationjs :: Old token deleted"),window.ReWebSDK.userRegister_payloadDefault.deviceTokenOld=`${ReWebSDK.pushHeaderKey};${ReWebSDK.pushConfig.messagingSenderId};${h.getItem("Token")}`,h.setItem("OldToken",`${ReWebSDK.pushHeaderKey};${ReWebSDK.pushConfig.messagingSenderId};${h.getItem("Token")}`),i()})).catch((function(i){t++,o("Notificationjs :: err on token delete, retrying... ",t);const n=setTimeout((function(){e(),clearTimeout(n)}),1e3*t)}))}()}}catch(e){o("Notificationjs :: err on token reset:",e)}},window.ReWebSDK.userLogout=function(){try{h.setItem("Res_Passport_Id",h.getItem("Res_Profile_Id")),window.ReWebSDK.userRegister_payloadDefault.passportId=h.getItem("Res_Profile_Id"),h.removeItem("Res_userLoggedIn"),h.removeItem("userRegisterInited"),h.removeItem("userRegisterData"),window.ReWebSDK.tokenReset()}catch(e){o("Notificationjs :: err on deleting token:",e)}},sessionStorage.getItem("Resul_updateToken")&&window.ReWebSDK.tokenReset())})).catch((function(e){o("Notificationjs :: fcm err: ",JSON.stringify(e)),o("Notificationjs :: retrying...: "),w.getItem("fb_block")||(w.setItem("fb_block",!0),h.getItem("Token")&&localStorage.removeItem("Token")),t++,o("Notificationjs :: err on token reset, retrying...",t);const n=setTimeout((function(){i(),clearTimeout(n)}),1e3*t)})),e.onTokenRefresh((()=>{e.getToken().then((e=>{h.setItem("Token",e),D.tokenRegister(token).then((e=>{}))})).catch((e=>{showToken("Unable to retrieve refreshed token ",e)}))})),e.onMessage(s)}catch(e){o("Notificationjs :: err: ",e)}}()})).catch((e=>o("Notificationjs :: Service Worker Error",e)))}))};if("denied"==Notification.permission&&h.getItem("RequestPermission")!=(new Date).toLocaleDateString()&&h.setItem("RequestPermission",(new Date).toLocaleDateString()),"granted"!=Notification.permission&&h.getItem("RequestPermission2")!=(new Date).toLocaleDateString()){if(0==ReWebSDK.notificationPrompt)Notification.requestPermission().then((function(e){"granted"==e&&d()}));else{let e='<svg xmlns="http://www.w3.org/2000/svg" id="notification-icon" width="80" height="80" viewBox="0 0 512 512" style="\n                            fill:#666;\n                        ">\n                                        <g>\n                                            <path d="M248,416H80a8,8,0,0,0,0,16H248a8,8,0,0,0,0-16Z" />\n                                            <path d="M288,416H272a8,8,0,0,0,0,16h16a8,8,0,0,0,0-16Z" />\n                                            <path\n                                                d="M440,64H297.96A151.122,151.122,0,0,0,255.9,45.32a39.987,39.987,0,0,0-79.8.06C111.58,63.11,64,122.75,64,193.38V377.12a16.007,16.007,0,0,1-2.43,8.48l-13.4,21.44A31.991,31.991,0,0,0,75.3,456h85.28a55.994,55.994,0,0,0,110.84,0H356.7a31.991,31.991,0,0,0,27.13-48.96l-13.4-21.44a16.007,16.007,0,0,1-2.43-8.48V248h72a24.032,24.032,0,0,0,24-24V88A24.032,24.032,0,0,0,440,64ZM216,24a24.044,24.044,0,0,1,23.18,17.78A153.017,153.017,0,0,0,215.98,40h-.05a150.561,150.561,0,0,0-23.11,1.78A24.044,24.044,0,0,1,216,24Zm0,464a40.069,40.069,0,0,1-39.2-32h78.4A40.069,40.069,0,0,1,216,488Zm154.27-72.48A16,16,0,0,1,356.7,440H75.3a16,16,0,0,1-13.57-24.48l13.4-21.44A31.883,31.883,0,0,0,80,377.12V193.38C80,117.67,140.98,56.04,215.93,56h.05a136.022,136.022,0,0,1,46.01,8H248a24.032,24.032,0,0,0-24,24V224a24.032,24.032,0,0,0,24,24h8v48a8,8,0,0,0,13.66,5.66L323.31,248H352V377.12a31.883,31.883,0,0,0,4.87,16.96ZM448,224a8.011,8.011,0,0,1-8,8H320a8.008,8.008,0,0,0-5.66,2.34L272,276.69V240a8,8,0,0,0-8-8H248a8.011,8.011,0,0,1-8-8V88a8.011,8.011,0,0,1,8-8H440a8.011,8.011,0,0,1,8,8Z" />\n                                            <path\n                                                d="M344,136a24,24,0,1,0,24,24A24.027,24.027,0,0,0,344,136Zm0,32a8,8,0,1,1,8-8A8.009,8.009,0,0,1,344,168Z" />\n                                            <path\n                                                d="M280,136a24,24,0,1,0,24,24A24.027,24.027,0,0,0,280,136Zm0,32a8,8,0,1,1,8-8A8.009,8.009,0,0,1,280,168Z" />\n                                            <path\n                                                d="M408,136a24,24,0,1,0,24,24A24.027,24.027,0,0,0,408,136Zm0,32a8,8,0,1,1,8-8A8.009,8.009,0,0,1,408,168Z" />\n                                        </g>\n                                    </svg>';ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.icon&&(e=`<img style='padding-right:5px; min-width: 70px; max-width: 70px;'  src=${ReWebSDK.notificationPromptConfig.icon} alt="logo">`);let t="right";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.ctaAlignment&&(t=ReWebSDK.notificationPromptConfig.ctaAlignment);let i="inline-flex";ReWebSDK.notificationPromptConfig&&"notNowCtaEnable"in ReWebSDK.notificationPromptConfig&&(i=ReWebSDK.notificationPromptConfig.notNowCtaEnable?"inline-flex":"none"),ReWebSDK.notificationPromptConfig&&"secondaryCtaEnable"in ReWebSDK.notificationPromptConfig&&(i=ReWebSDK.notificationPromptConfig.secondaryCtaEnable?"inline-flex":"none");let n="Not Now";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.notNowCtaText&&(n=ReWebSDK.notificationPromptConfig.notNowCtaText),ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.secondaryCtaText&&(n=ReWebSDK.notificationPromptConfig.secondaryCtaText);let o="#fff";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.secondaryCtaBgColor&&(o=ReWebSDK.notificationPromptConfig.secondaryCtaBgColor);let s="#000";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.secondaryCtaTextColor&&(s=ReWebSDK.notificationPromptConfig.secondaryCtaTextColor);let r="#2196f3";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.primaryCtaBgColor&&(r=ReWebSDK.notificationPromptConfig.primaryCtaBgColor);let a="#fff";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.primaryCtaTextColor&&(a=ReWebSDK.notificationPromptConfig.primaryCtaTextColor);let l="#000";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.titleTextColor&&(l=ReWebSDK.notificationPromptConfig.titleTextColor);let c="#333";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.bodyTextColor&&(c=ReWebSDK.notificationPromptConfig.bodyTextColor);let u="#fff";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.bgColor&&(u=ReWebSDK.notificationPromptConfig.bgColor);let g="Allow";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.allowCtaText&&(g=ReWebSDK.notificationPromptConfig.allowCtaText),ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.primaryCtaText&&(g=ReWebSDK.notificationPromptConfig.primaryCtaText);let p="We would like to show updates";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.title&&(p=ReWebSDK.notificationPromptConfig.title);let m="Please allow to send you updates!";ReWebSDK.notificationPromptConfig&&ReWebSDK.notificationPromptConfig.content&&(m=ReWebSDK.notificationPromptConfig.content);let f="";window._currentTenant.tenantId&&"d4a3d14f-7617-4734-b005-dd3270ef6f25"==window._currentTenant.tenantId&&(f='<svg xmlns="http://www.w3.org/2000/svg" id="b" width="70" height="70" viewBox="0 0 55 21.18" style="position: absolute;bottom: 0;"><g id="c"><g><g><path d="m52.13,17.35c-.51-.29-1.07-.52-1.68-.68-.07-1.64-.78-3.25-1.97-4.45-1.25-1.26-2.89-1.92-4.66-1.87-.23-.79-.61-1.54-1.1-2.19L51.2,0h-5.53s-6.06,5.86-6.06,5.86c-1.03-.36-2.14-.45-3.23-.27-.9.15-2.05.48-2.9.98-2.5-2.06-5.19-2.6-8.52-1.62-1.6.47-3.05,1.45-4.18,2.83-1.02,1.24-1.78,2.78-2.27,4.6-1.72.31-3.16,1.07-4.19,2.22-1.41,1.58-2.18,3.7-2.18,5.99s.8,4.46,2.24,6.06c1.49,1.64,3.51,2.55,5.69,2.55h28.33s.03-.01.03-.01c.17-.01.35,0,.52-.02.17-.02.35-.06.52-.1.21-.05.42-.1.62-.16.2-.06.4-.13.6-.21.39-.16.77-.35,1.13-.58.36-.23.7-.48,1.01-.77,1.39-1.27,2.16-2.95,2.16-4.73,0-2.97-1.56-4.49-2.87-5.24Z" style="fill:#fff;"></path><g><polygon points="40.08 10.03 40.07 10.03 40.07 10.03 40.08 10.03" style="fill:none;"></polygon><polygon points="46.38 19.6 49.95 17.05 46.38 19.6 46.38 19.6" style="fill:none;"></polygon><path d="m48.32,25.94h-.28c.09,0,.18,0,.28,0Z" style="fill:none;"></path><polygon points="21.19 15.43 21.19 15.43 21.2 15.43 21.19 15.43" style="fill:#c69943;"></polygon><polygon points="18.91 12.81 18.9 12.81 18.91 12.82 18.91 12.81" style="fill:#c69943;"></polygon><polygon points="33.49 10.9 33.48 10.9 33.48 10.9 33.49 10.9" style="fill:#0d2186;"></polygon><path d="m21.19,15.43l.2-1.08c0-.05.02-.1.03-.15.87-4.44,3.16-5.75,4.46-6.13,2.59-.76,4.67-.24,6.5,1.65.06.07.13.13.19.2l.91.99v-3.72s0,0,0,0c-2.43-2.13-5.09-2.73-8.38-1.76-1.51.44-2.87,1.37-3.94,2.67-1.03,1.25-1.79,2.84-2.26,4.72,0,0,0,0,0,0l2.29,2.61Z" style="fill:#731faa;"></path><rect x="40.93" y="14.36" width="0" height="0" transform="translate(-2.42 12.9) rotate(-17.41)" style="fill:#275d39;"></rect><path d="m49.96,17.05s0,0,0-.01h-.01s0,.01.01.01Z" style="fill:#275d39;"></path><path d="m43.47,10.85s-.01,0-.02,0c0,0,0,.01,0,.02l.02-.02Z" style="fill:#275d39;"></path><path d="m33.48,10.9h0s.88-.76.88-.76l.13-.11c.72-.63,1.4-.97,2-1.15l2.73-2.64c-.88-.27-1.82-.33-2.75-.17-.95.16-2.1.52-2.98,1.09,0,0,0,0,0,0,0,0,0,0,0,0v3.72Z" style="fill:#c69943;"></path><path d="m46.66,25.94h-26.58c-1.26,0-2.42-.53-3.29-1.48-.9-1-1.4-2.38-1.4-3.88s.48-2.85,1.36-3.83c.48-.54,1.42-1.19,3.19-1.28.05,0,.1,0,.15,0l1.11-.03h0s-2.29-2.62-2.29-2.62h0c-1.75.24-3.19.96-4.21,2.1-1.33,1.49-2.06,3.5-2.06,5.66s.75,4.23,2.11,5.73c1.39,1.54,3.28,2.38,5.33,2.38h26.58v-2.74h0Z" style="fill:#00097b;"></path><path d="m40.93,14.36h0s1.74-.54,1.74-.54c.33-.11.63-.18.92-.21,1.24-.14,2.08.37,2.59.89.62.63,1,1.51,1.03,2.33.01.33-.03.65-.13.94l-.7,1.83,3.57-2.55h.01c.03-1.61-.63-3.27-1.83-4.49-1.25-1.27-2.9-1.85-4.66-1.71l-.02.02-2.53,3.48Z" style="fill:#902425;"></path><path d="m51.89,17.77c-.64-.36-1.3-.59-1.93-.72,0,0,0,0-.01,0l-3.57,2.55h0s0,0,0,0l1.95.02c.24,0,.59.03.98.11.39.08.82.21,1.21.43.84.48,1.24,1.25,1.23,2.42,0,1.67-1.51,3.15-3.32,3.34h-.12c-.09.02-.19.02-.28.02h-1.38s0,2.74,0,2.74h1.75c.33-.03.66-.08.98-.15,0,0,1.59-.23,3.12-1.59,1.3-1.16,2-2.73,2-4.37,0-2.74-1.42-4.13-2.62-4.81Z" style="fill:#275d39;"></path><path d="m40.59,10.94c.07.15.13.26.14.3.03.11.06.22.09.33.2.9.1,1.89.11,2.8l2.53-3.48s0-.01,0-.02c-.2-.86-.57-1.67-1.08-2.36l-2.01,1.94c.09.16.17.32.24.49Z" style="fill:#c69943;"></path><polygon points="29.87 15.97 29.87 10.9 25.43 10.9 25.43 24.14 49.99 .49 45.94 .5 29.87 15.97" style="fill:#0027ee;"></polygon></g></g><polygon points="6.46 6.73 0 20.18 3.23 20.18 3.23 28.69 9.16 15.85 6.05 15.85 6.46 6.73" style="fill:#f5bb41;"></polygon></g></g></svg>');const h=`\n                            <style>\n                            @import url('https://fonts.googleapis.com/css2?family=Mukta:wght@300&display=swap');\n                            #notification-wrapper,\n                            #notification-body{\n                                transition-duration:1s;\n                            }\n                            #notification-wrapper{\n                                width: 100%;\n                                left: 0;\n                                right: 0;\n                                top: 0;\n                                bottom: 0;\n                                background:rgba(0,0,0,.8);\n                                animation-name:fadeInbg;\n                                animation-duration:2s;\n                                font-family: 'Mukta', sans-serif;\n                            }\n                            #notification-wrapper.focus:before {\n                                content: "${"Brave"==ReWebSDK.utils.browserName?"Please enable google services for push messaging":"Please click allow to receive notification"}";\n                                font-size: 2em;\n                                line-height: 40px;\n                                text-align: center;\n                                color: #fff;\n                                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    \n                            }\n                            @media only screen and (max-width: 600px) {\n                                #notification-wrapper.focus:before {\n                                    font-size: 1em;\n                                }\n                            }\n                            #notification-wrapper.focus{\n                                background:rgba(0,0,0) !important;\n                                display: flex;\n                                justify-content: center;\n                                align-items: center;\n                            }\n                            #notification-wrapper.active{\n                                transition-duration:1s;\n                                transform: translateY(-0%) !important;\n                            }\n                            #notification-body.active{\n                            box-shadow: 0 0px 10px 0px rgba(33, 150, 243, .5) inset !important;\n                                transition-duration:1s;\n                            }\n                            .hideit{\n                                display:none;\n                            }\n                            @keyframes fadeInbg {\n                                from{\n                                    background:rgba(0,0,0,0);\n                                }\n                                to{\n                                    background:rgba(0,0,0,.8);\n                                }\n                            }\n                            @keyframes bell {\n                                0% {transform: rotateZ(0deg)},\n                                25% { transform: rotateZ(5deg)},\n                                75% { transform: rotateZ(-5deg)},\n                                100% { transform: rotateZ(0deg)}\n                            }\n                            .animateBell {\n                                animation-iteration-count:2;\n                                animation-name:bell;\n                                animation-duration:10;\n                            }\n                            </style>\n                            <div id="notification-wrapper" style="z-index:9999999999;position: fixed; transform: translateY(-120%); ">\n            <div id="notification-body-wrapper" style="background:${u};max-width:400px;margin: auto;box-shadow: 0 0px 10px 0px rgba(0, 0, 0, .2);border: 1px solid rgba(0, 0, 0, 0.05);padding: 12px;position:relative;">\n                <div id="notification-body" style="display:flex;">\n    \n                    <div style="padding-right: 5px">\n                        ${e}\n                    </div>\n                    <div>\n                        <p style="margin: 0px;font-size: 16px;margin-top: 0px;font-weight: 700; color:${l};">${p}</p>\n                        <p style="margin: 0px;font-size: 13px;line-height: 18px;margin-top: 3px;color:${c};">${m}</p>\n                    </div>\n                </div>\n                ${f}\n                <div style="text-align: ${t};margin-top: 15px;">\n                <button id="notification-notnow" style="box-shadow: 0 -3px 25px 1px rgba(0, 0, 0, 0.15) inset;height: 32px !important;\n                border-radius: 3px;border: none;font-size:14px;\n                display: ${i};\n                justify-content: center;cursor:pointer;\n                background: ${o};\n                color:${s};\n                align-items: center;width:max-content;min-width:110px;" >${n}</button>\n    \n                <button id="notification-allow" style="box-shadow: 0 -3px 25px 1px rgba(0, 0, 0, 0.15) inset; height: 32px !important;\n                border-radius: 3px;border: none;font-size:14px;\n                display: inline-flex;\n                justify-content: center;\n                // background:rgba(33, 150, 243);\n                // color:#fff;\n                background: ${r};\n                color:${a};\n                margin-left:5px;cursor:pointer;\n                align-items: center;width:max-content;min-width:110px;">${g}</button>\n                </div>\n            </div>\n            </div> `;document.body.insertAdjacentHTML("afterbegin",h);const w=setTimeout((()=>{document.getElementById("notification-wrapper").classList.add("active"),clearTimeout(w)}),1e3);document.getElementById("notification-notnow").onclick=()=>{document.getElementById("notification-wrapper").classList.remove("active")},document.getElementById("notification-allow").onclick=()=>{document.getElementById("notification-icon")&&document.getElementById("notification-icon").setAttribute("style","fill:rgba(33, 150, 243)"),document.getElementById("notification-wrapper").classList.add("focus"),document.getElementById("notification-body-wrapper").classList.add("hideit");const e=setTimeout((function(){document.getElementById("notification-wrapper").classList.remove("active"),clearTimeout(e)}),5e3);Notification.requestPermission().then((function(e){"granted"==e?d():document.getElementById("notification-icon")&&document.getElementById("notification-icon").setAttribute("style","fill:#666"),document.getElementById("notification-wrapper").classList.remove("active")}))}}h.setItem("RequestPermission2",(new Date).toLocaleDateString())}function l(){o("Notificationjs :: checkResulNotification called"),"granted"==Notification.permission&&d()}if(l(),window.ReWebSDK.utils.browserName.includes("Firefox")&&"granted"!=Notification.permission){let e=0;const t=setInterval((()=>{15==e&&"granted"==Notification.permission&&(l(),o("Notificationjs :: timer cleared fx :"+e),clearInterval(t)),25==e&&"granted"==Notification.permission&&(l(),o("Notificationjs :: timer cleared fx :"+e),clearInterval(t)),35==e&&"granted"==Notification.permission&&(l(),o("Notificationjs :: timer cleared fx :"+e),clearInterval(t)),45==e&&"granted"==Notification.permission&&(l(),o("Notificationjs :: timer cleared fx :"+e),clearInterval(t)),55==e&&("granted"==Notification.permission&&(l(),o("Notificationjs :: timer cleared fx :"+e)),clearInterval(t)),e+=5}),5e3)}}"appId"in ReWebSDK.pushConfig?window.ReWebSDK.utils.importDynamicModule("https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js").then((t=>{window.ReWebSDK.utils.importDynamicModule("https://www.gstatic.com/firebasejs/8.6.8/firebase-messaging.js").then((t=>{e()}))})):window.ReWebSDK.utils.importDynamicModule(D.notificationModulePath()).then((t=>{e()}))}}catch(e){o("Notificationjs :: notification js: ",e)}}const T=window._currentTenant;var P=new class{constructor(){"5f7a2e8e_1bdb_4739_9d28_278a2759394c"==T._tenantId&&this.gaImage()}gaImage(){var e=document.createElement("img");e.setAttribute("src",`https://al.resulticks.com/${T.ga_id}ns.gif`),e.setAttribute("height","1"),e.setAttribute("width","1"),e.setAttribute("border","0"),e.setAttribute("style","display:none");try{document.body.appendChild(e)}catch(e){console.log("ga_id append error")}}loadScripts(){try{var e,t=document.URL;e=y.readCookie("ResData");var i="",n="",o="",s="",r="";if(h.getItem("Token")&&(r=`${ReWebSDK.pushHeaderKey};${ReWebSDK.pushConfig.messagingSenderId};${h.getItem("Token")}`),null!=e){var a=JSON.parse(e),d=y.JsonSort(a)[0],l=d.Cid,c=d.Sid,u=d.Did,g=d.Pid;null==g&&(g=d.Rid),i=l,n=c,o=u,s=g}var p={FP:h.getItem("_uuid")||"",dbId:T._tenantId,urlreferrer:t,bpid:"",tpid:"",dpid:o,cpid:i,spid:n,rpid:s,chnlp:"",token:r.length>300?r:""};y.fnTrackUrlwithData({...p})}catch(e){window.ReWebSDK.onerror(e)}}};function K(){try{sessionStorage.setItem("referrer",document.referrer)}catch(e){}!function(){let e=location.href;new MutationObserver((()=>{location.href!==e&&(window.dispatchEvent(new CustomEvent("onAppPathChange",{detail:{old:e,new:location.href}})),e=location.href)})).observe(document,{subtree:!0,childList:!0});let t=new URL(location.href),i=new URLSearchParams(t.search);(i.has("resulid")||i.has("utm_source"))&&localStorage.setItem("lastLocation",document.referrer)}(),document.addEventListener("scroll",(function(){let e=Math.round(window.pageYOffset/(document.body.scrollHeight-(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))*100);w.setItem("s_percentage",e),h.setItem("s_position",JSON.stringify({x:window.pageXOffset,y:window.pageYOffset}))})),function(){function e(){w.getItem("appLoaded")||w.setItem("appLoaded",!0),o("calling pageNavigation.loadScripts"),P.loadScripts();let e=Number(w.getItem("appViewsPerSession"));if(e+=1,w.setItem("appViewsPerSession",e),h.getItem("ujScreens")&&h.getItem("Res_Profile_Id")){let e=JSON.parse(h.getItem("ujScreens"))||[];o("ujdata length: "+e.length),e.length>2&&D.UserJourneyBulk(e),setInterval((()=>{let e=JSON.parse(h.getItem("ujScreens"))||[];o("ujdata update length: "+e.length),e.length>0&&D.UserJourneyBulk(e)}),1e5)}}w.setItem("pageStartTime",new Date((new Date).toUTCString()).toISOString().split(".")[0]),console.log("LOG: Session ID",ReWebSDK.utils.SSH.getItem("ujId")),console.log("LOG: ",ReWebSDK.utils.SSH.getItem("pageStartTime")),e(),window.addEventListener("beforeunload",(e=>{localStorage.setItem("lastLocation",window.location.href),h.setItem("lastPageTimeSpent",window.ReWebSDK.utils.getCurrentPageTimeSpent()),h.setItem("lastSessionTimeSpent",window.ReWebSDK.utils.getCurrentSessionTimeSpent()),h.setItem("Resul_endDateAt",new Date((new Date).toUTCString()).toISOString())})),window.addEventListener("onAppPathChange",(t=>{localStorage.setItem("lastLocation",t.detail.old),sessionStorage.setItem("referrer",t.detail.old),h.getItem("Res_Profile_Id")&&D.UserJourneyScreens(),e()})),window.addEventListener("beforeunload",(e=>{h.setItem("lastVisit",new Date),h.getItem("Res_Profile_Id")&&D.UserJourneyScreens()}))}(),document.onvisibilitychange=function(){"visible"===document.visibilityState&&sessionStorage.setItem("Resul_pageinitedAt",(new Date).getTime())},window.addEventListener("onAppPathChange",(e=>{sessionStorage.setItem("Resul_pageinitedAt",(new Date).getTime())}))}window.sdk=class{initDependencies(){var e,s,r;"function"!=typeof requirejs&&n("https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"),function(){var e=function(e){var t,i;t=Array.prototype.forEach,i=Array.prototype.map,this.each=function(e,i,n){if(null!==e)if(t&&e.forEach===t)e.forEach(i,n);else if(e.length===+e.length){for(var o=0,s=e.length;o<s;o++)if(i.call(n,e[o],o,e)==={})return}else for(var r in e)if(e.hasOwnProperty(r)&&i.call(n,e[r],r,e)==={})return},this.map=function(e,t,n){var o=[];return null==e?o:i&&e.map===i?e.map(t,n):(this.each(e,(function(e,i,s){o[o.length]=t.call(n,e,i,s)})),o)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.screen_orientation=e.screen_orientation,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)};e.prototype={get:function(e){var t=[];if(t.push(e),t.push(navigator.userAgent),t.push(navigator.language),t.push(screen.colorDepth),this.screen_resolution&&void 0!==this.getScreenResolution()&&t.push(this.getScreenResolution().join("x")),t.push((new Date).getTimezoneOffset()),t.push(this.hasSessionStorage()),t.push(this.hasLocalStorage()),t.push(!!window.indexedDB),document.body)try{t.push(typeof document.body.addBehavior)}catch(e){o("UniqueIdGenerator:: keys push err")}else t.push("undefined");return t.push(typeof window.openDatabase),t.push(navigator.cpuClass),t.push(navigator.platform),t.push(navigator.doNotTrack),t.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&t.push(this.getCanvasFingerprint()),this.hasher?this.hasher(t.join("###"),31):this.murmurhash3_32_gc(t.join("###"),31)},murmurhash3_32_gc:function(e,t){var i,n,o,s,r,a,d,l;for(i=3&e.length,n=e.length-i,o=t,r=3432918353,a=461845907,l=0;l<n;)d=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,o=27492+(65535&(s=5*(65535&(o=(o^=d=(65535&(d=(d=(65535&d)*r+(((d>>>16)*r&65535)<<16)&4294967295)<<15|d>>>17))*a+(((d>>>16)*a&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(d=0,i){case 3:d^=(255&e.charCodeAt(l+2))<<16;case 2:d^=(255&e.charCodeAt(l+1))<<8;case 1:o^=d=(65535&(d=(d=(65535&(d^=255&e.charCodeAt(l)))*r+(((d>>>16)*r&65535)<<16)&4294967295)<<15|d>>>17))*a+(((d>>>16)*a&65535)<<16)&4294967295}return o^=e.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){try{var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}catch(e){o("UniqueIdGenerator:: isCanvasSupported err")}},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,(function(e){var t=this.map(e,(function(e){return[e.type,e.suffixes].join("~")})).join(",");return[e.name,e.description,t].join("::")}),this).join(";")},getIEPluginsString:function(){return window.ActiveXObject?this.map(["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"],(function(e){try{return new ActiveXObject(e),e}catch(e){return null}})).join(";"):""},getScreenResolution:function(){return this.screen_orientation?screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height]:[screen.height,screen.width]},getCanvasFingerprint:function(){try{var e=document.createElement("canvas"),t=e.getContext("2d"),i='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!@#$%^&*()_+-={}|[]:"<>?;,.';return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(i,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(i,4,17),e.toDataURL()}catch(e){o("UniqueIdGenerator:: getCanvasFingerprint err")}}};const t=e=>e.toString(16).toUpperCase();window._resMethods.decimalToHexString=t,window._resMethods.getFPID=new e({canvas:!0,ie_activex:!0,screen_resolution:!0}),window._device_info={hash:t(new e({canvas:!0,ie_activex:!0,screen_resolution:!0}).get())},Object.freeze(window._device_info),window.onstorage=function(){o("UniqueIdGenerator:: ","on storage event emitted!"),i()};let i=()=>{try{o("UniqueIdGenerator:: ",document.querySelector("[r_uid]").getAttribute("r_uid")),s()(document.querySelector("[r_uid]").getAttribute("r_uid"))}catch(e){o("check_uuid err")}},n=function(e){if(!document.querySelector("[r_uid]"))try{var t=document.createElement("SPAN"),i=document.createAttribute("r_uid");i.value=e,t.setAttributeNode(i),document.body.appendChild(t)}catch(e){o("UniqueIdGenerator:: r_uid err")}},s=function(){return e=>{h.setItem("_uuid",e),n(e)}};if(h.getItem("_uuid")||document.querySelector("[r_uid]"))n(h.getItem("_uuid")||document.querySelector("[r_uid]").getAttribute("r_uid")),o("UniqueIdGenerator:: ","DeviceId fetched",h.getItem("_uuid"),document.querySelector("[r_uid]").getAttribute("r_uid")),window.ReWebSDK.userRegister_payloadDefault.deviceId=h.getItem("_uuid");else{let e=_device_info.hash;s()(e),o("UniqueIdGenerator:: ","DeviceId created",e),console.log("Krishna: ",e),window.ReWebSDK.userRegister_payloadDefault.deviceId=e}}(),window.ReWebSDK.utils={...window.ReWebSDK.utils,LSH:h,SSH:w,postItem:S,fetchItem:b,handleStoreFailureApiAdd:I,handleStoreFailureApiRemove:_,oSname:(e=window.navigator.userAgent,s=window.navigator.platform,r=null,-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(s)?r="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(s)?r="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(s)?r="Windows":/Android/.test(e)?r="Android":!r&&/Linux/.test(s)&&(r="Linux"),r),oSVersion:t(),deviceType:i()},window.ReWebSDK.methods.clientApiService=D,window.ReWebSDK.methods.tokenRegisterApi_force=null,h.setItem("dtype",i())}clientSpecificMethods(){const e=window._currentTenant.tenantName,t=window._currentTenant._tenantId;try{if(h.getItem("userRegisterInited")&&!h.getItem("Res_userLoggedIn")){o("retrying user register method");try{window.ReWebSDK.userRegister(JSON.parse(h.getItem("userRegisterData")))}catch(e){o("retrying user register method err: ",e)}}}catch(e){o("retrying user register method err: ",e)}if("uti-mf"==e&&"/chhota-sip"==window.location.pathname&&window.addEventListener("unload",(()=>{ReWebSDK.customEvent({eventName:"page Exit"})})),"resulticks"==e&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/resulticks.module.js").then((e=>{if(window.resulticksModule){const{init:e}=window.resulticksModule;e()}})),"vinamilk"==e&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/vinamilk.module.js").then((e=>{if(window.vinamilkmodule){const{init:e}=window.vinamilkmodule;e()}})),"ambank"==e&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/ambank.module.js").then((e=>{if(window.ambankmodule){const{init:e}=window.ambankmodule;e()}})),"9a9ec5d2_f860_43e3_a439_9c8450695551"==t&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/abfrl.module.js").then((e=>{if(window.abfrlmodule){const{init:e}=window.abfrlmodule;e()}})),"f3b3cd18_aa45_4e62_b518_4624a856d814"==t&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/ais.module.js").then((e=>{if(window.aismodule){const{init:e}=window.aismodule;e()}})),"hdfc"==e&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/hdfc.module.js").then((e=>{if(window.ResulHdfcMethods){const{getPsuedoCookie:e}=window.ResulHdfcMethods;window.ReWebSDK.getPsuedoCookie=e}})),"f4f0811b_658c_45e7_9432_2f307b93c235"==t&&!h.getItem("isVisited")&&w.getItem("1stsession"),"d4a3d14f_7617_4734_b005_dd3270ef6f25"==t&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/visionretail.module.js").then((e=>{if(window.visionretailModule){const{init:e}=window.visionretailModule;e()}})),"22f5edd7_e3e7_4c50_868d_4b28f4e83f4d"==t&&(window.ReWebSDK.utils.importModule("/clientSpecificFiles/rbl.module.js").then((e=>{if(window.rblModule){const{init:e}=window.rblModule;e();try{window.ReWebSDK.getRblUrlParamData=function(){let e={},t=window.ReWebSDK.utils.LSH.getItem("rblUrlParamData")||{};if(Object.keys(t).length>0){Object.filter=(e,t)=>Object.fromEntries(Object.entries(e).filter(t));let i=["gclid","fbclid","utm_term","leadsource","utm_campaign","cardid","cs","cg","sc"];t=JSON.parse(t),i.forEach((i=>{let n=Object.filter(t,(([e,t])=>e==i));e={...e,...n}}))}return e}}catch(e){o("Rbl url param error: ",e)}}})),location.href.includes("https://rblclouduat.rblbank.com/apply-credit-card/appform")&&document.querySelector('[type="submit"]'))){"getotp"==document.querySelector('[type="submit"]').innerText.toLocaleLowerCase().trim().replace(" ","")&&document.querySelector('[type="submit"]').addEventListener("click",(function(){setTimeout((()=>{document.querySelector(".confirmBtn")&&document.querySelector(".confirmBtn").addEventListener("click",(function(){window.ReWebSDK.customEvent({eventName:"Getotp"})}))}),5e3)}))}"bb073c1c_0589_4bc3_bb5d_eaf9ef5364e5"==t&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/medanta.module.js").then((e=>{if(window.medantaModule){const{init:e}=window.medantaModule;e()}})),"7301417b_a775_44b2_9fb5_db8fbddd35f4"==t&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/financialadvisors.module.js").then((e=>{if(window.financialAdvisorsModule){const{init:e}=window.financialAdvisorsModule;e()}}))}conditionalMethods(){if(h.getItem("Res_Profile_Id")){try{window.ReWebSDK.utils.importModule("/AppRuleListener.js").then((e=>{if(window.AppRuleListener){var t=new(0,window.AppRuleListener);function i(){let e=location.origin;"54b865b8_5123_461a_accf_d12ed01ce383"==window._currentTenant._tenantId&&(e=location.hostname.includes("www.")?location.protocol+"//"+location.hostname:location.protocol+"//www."+location.hostname),D.getsdkrules({appid:"",tenantid:window._currentTenant._tenantId,domainname:e}).then((e=>{console.log("rule response",e),w.setItem("apprulesloaded",!0),t.init(e),S("sdk_rules",e).then((e=>{o("Rules updated")}),(e=>{}))}))}if(w.getItem("apprulesloaded"))try{b("sdk_rules").then((e=>{o("Localrules:: sdk_rules_local rule Fetched from server"),t.init(e.value)})).catch((e=>{i()}))}catch(e){i()}if(w.getItem("apprulesloaded")||(o("Localrules:: sdk_rules_local rule Fetched from local cache"),i()),"9b6f3da7_0a51_4781_a8d3_a1b3da1cf3ec"==_currentTenant._tenantId||"f4f0811b_658c_45e7_9432_2f307b93c235"==_currentTenant._tenantId){console.log("resume journey inited");try{window.ReWebSDK.resumeJourneyCallback=function(e){console.log("resumeJourneyCallback data",e),e.type&&("mobile"==e.source?e.fragmentName.toLocaleLowerCase().includes("dashboard")?window.location.href="/":e.fragmentName.toLocaleLowerCase().includes("personal")?window.location.href="/personalloan.html":e.fragmentName.toLocaleLowerCase().includes("creditcard")?window.location.href="/creditcard.html":e.fragmentName.toLocaleLowerCase().includes("billpay")?window.location.href="/paybills.html":e.fragmentName.toLocaleLowerCase().includes("homeloan")?window.location.href="/homeloan.html":e.fragmentName.toLocaleLowerCase().includes("autoloan")?window.location.href="/autoloan.html":e.fragmentName.toLocaleLowerCase().includes("saving")?window.location.href="/savingaccount.html":window.location.href="/":window.location.href=e.url)},window.ReWebSDK.resumeJourney()}catch(e){o("resumeJourney err: ",e)}}if("d4a3d14f_7617_4734_b005_dd3270ef6f25"==_currentTenant._tenantId||location.href.includes("visionretail.resulticks.net")){console.log("resume journey inited");try{window.ReWebSDK.resumeJourneyCallback=function(e){console.log("resumeJourneyCallback data",e),e.type&&("mobile"==e.source?e.fragmentName.toLocaleLowerCase().includes("dashboardfragment")?window.location.href="/":e.fragmentName.toLocaleLowerCase().includes("televisionfragment")?window.location.href="/apparel.html":e.fragmentName.toLocaleLowerCase().includes("mobilefragment")?window.location.href="/mobile-product.html":e.fragmentName.toLocaleLowerCase().includes("computersfragment")?window.location.href="/computerproducts.html":e.fragmentName.toLocaleLowerCase().includes("homeappliancefragment")&&(window.location.href="/homeappliances.html"):window.location.href=e.url)},window.ReWebSDK.resumeJourney()}catch(e){o("resumeJourney err: ",e)}}}}))}catch(e){}this.clientSpecificMethods();try{(document.querySelector('[src^="https://teamsdk.resulticks.net"]')||"https://visionarybank.resulticks.net"==location.origin||"custombase"in ReWebSDK.configs&&"https://teamsdk.resulticks.net"==ReWebSDK.configs.custombase)&&setTimeout((function(){(()=>{const e=e=>{if(console_log("ProgressiveModule:: formData",e),e.brandFormList){let t=JSON.parse(JSON.stringify(e.brandFormList)),i=null;t.length?(console_log("ProgressiveModule:: dataFormToCapture ",t),t.forEach((e=>{e.fieldvalue="",console_log("ProgressiveModule:: formField",e);const n=document.getElementById(e.viewId)||document.querySelector(`[name="${e.viewId}"]`);if(console_log("ProgressiveModule:: formFieldItem",n),n)switch("true"==e.markAsSubmit&&(n.onclick=function(){i=t.filter((t=>t.formId==e.formId));const n=i.map((e=>{if(e.fieldName&&e.fieldType&&(e.fieldvalue||""==e.fieldvalue))return{required:e.required,fieldName:e.fieldName,fieldType:e.fieldType,fieldvalue:e.fieldvalue}})).filter(Boolean);if(n.filter((e=>"true"==e.required)).every((e=>""!=e.fieldvalue&&null!=e.fieldvalue))){let o={formId:e.formId,APIKey:window._currentTenant._tenantId,SourceUrl:window.location.href,pagereferrerurl:window.document.referrer,pagetitle:window.document.title,rid:window.ReWebSDK.userRegister_payloadDefault.rid,cid:window.ReWebSDK.userRegister_payloadDefault.cid,formData:n};D.post(D.IndexInsertBrandOwnData,o).then((e=>{i=null,t.forEach((e=>{e.fieldvalue=""}))}))}else console.log("progressive form:: one of the required field is not valued!")}),e.fieldType.toLowerCase()){case"text":n.addEventListener("focusout",(function(){e.fieldvalue=n.value,console_log("ProgressiveModule:: dataFormCapturedValue ",t)}));break;case"dropdown":n.onchange=function(){e.fieldvalue=n.options.selectedIndex,console_log("ProgressiveModule:: dataFormCapturedValue ",t)}}else console_log("ProgressiveModule:: formFieldItemWithId "+e.viewId+" Not Found")})),window.onbeforeunload=function(){}):console_log("ProgressiveModule:: No data matched To Capture ",t)}if(e.fieldList){let t=JSON.parse(JSON.stringify(e.fieldList)).filter((e=>location.href.includes(e.screenName)));t.length?(console_log("ProgressiveModule:: dataFormToCapture ",t),t.forEach((e=>{e.result="",console_log("ProgressiveModule:: formField",e);const i=document.getElementById(e.viewId)||document.querySelector(`[name="${e.viewId}"]`)||document.querySelector(`[name="${e.viewName}"]`);if(console_log("ProgressiveModule:: formFieldItem",i),i){if("value"==e.eventOption.toLowerCase())switch(i.tagName.toLowerCase()){case"select":i.onchange=function(){e.result=i[i.options.selectedIndex].value,console_log("ProgressiveModule:: dataFormCapturedValue ",t)};break;default:"radio"==i.type?i.onchange=function(n){e.result=i.checked,console_log("ProgressiveModule:: dataFormCapturedValue ",t)}:i.addEventListener("focusout",(function(){e.result=i.value,console_log("ProgressiveModule:: dataFormCapturedValue ",t)}))}if("length"==e.eventOption.toLowerCase())switch(i.tagName.toLowerCase()){case"select":i.onchange=function(){e.result=i[i.options.selectedIndex].value.length,console_log("ProgressiveModule:: dataFormCapturedValue ",t)};break;default:"radio"==i.type?i.onchange=function(n){e.result=i.checked.length,console_log("ProgressiveModule:: dataFormCapturedValue ",t)}:i.addEventListener("focusout",(function(){e.result=i.value.length,console_log("ProgressiveModule:: dataFormCapturedValue ",t)}))}"click"==e.eventOption.toLowerCase()&&(e.result="click")}else console_log("ProgressiveModule:: formFieldItemWithId "+e.viewId+" Not Found")})),window.onbeforeunload=function(){h.setItem("fieldCapture",JSON.stringify(t)),console.log("ProgressiveModule:: data To Capture ",h.getItem("fieldCapture"))}):console_log("ProgressiveModule:: No data matched To Capture ",t)}};window.ReWebSDK.utils.SSH.getItem("fieldsToRecordandCaptureData")?e(JSON.parse(atob(window.ReWebSDK.utils.SSH.getItem("fieldsToRecordandCaptureData")))):D.post("https://teamsdk.resulticks.net/Campaign/GetWebCapturedFieldsClient",{domainName:document.domain,clientId:_currentTenant._tenantId}).then((t=>{window.ReWebSDK.utils.SSH.setItem("fieldsToRecordandCaptureData",btoa(JSON.stringify(t))),e(t)}))})()}),5e3)}catch(e){}if(!w.getItem("idbsaved"))try{const e=window.ReWebSDK.utils.postItem;e("Res_Passport_Id",h.getItem("Res_Passport_Id")),e("Res_Profile_Id",h.getItem("Res_Profile_Id")),e("_tenantId",window._currentTenant._tenantId),e("deviceId",ReWebSDK.userRegister_payloadDefault.deviceId),e("sessionId",w.getItem("ujId")),e("domainName","5f7a2e8e_1bdb_4739_9d28_278a2759394c"==_currentTenant._tenantId?"https://"+location.hostname.replace("www.",""):location.hostname.replace("www.","")),w.getItem("idbsaved",!0)}catch(e){}!function(){let e="";Date.prototype.add_Days=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var t=new Date,i=t.add_Days(ReWebSDK.returnUserConfig.days);!h.getItem("isVisited")&&!w.getItem("1stsession")||h.getItem("isVisited")&&w.getItem("1stsession")?(h.getItem("returnUserTargetDate")||h.setItem("returnUserTargetDate",i.toLocaleDateString()),t>new Date(h.getItem("returnUserTargetDate"))&&window.addEventListener("beforeunload",(()=>{h.setItem("isVisited",1),w.setItem("1stsession","true")})),e="NEW-USER"):e="RETURN-USER",o("user type",e);let n=h.getItem("visitedCount")?Number(h.getItem("visitedCount")):0;w.getItem("countedVisits?")||(n++,w.setItem("countedVisits?",!0)),h.setItem("visitedCount",n)}(),K(),window.ReWebSDK.utils.importModule("/liveVisitors.js").then((e=>{if(window.liveVisitors){(0,window.liveVisitors)()}}));if(["23f02e8b_719d_402c_bb9e_b22442ae01bc"].some((e=>e==window._currentTenant._tenantId)))"serviceWorker"in navigator&&navigator.serviceWorker.register(window.ReWebSDK.serviceWorkerFile).then((e=>{o("Service Worker registered: ",e)})).catch((e=>{o("Error registering the Service Worker: ",e)}));else{["dd252cfe_a42e_4b80_8370_b7372ea4371d","9a9ec5d2_f860_43e3_a439_9c8450695551","b9fa736f_48f6_4acf_8a4b_dd625ca6c001","6da5fc51_c42d_4616_9f68_b80a2f37f335","7301417b_a775_44b2_9fb5_db8fbddd35f4","bb073c1c_0589_4bc3_bb5d_eaf9ef5364e5","3c675be0_b0db_4d2e_a2c6_8ffe8a6e63b4"].some((e=>e==window._currentTenant._tenantId))?window.ReWebSDK.utils.importModule("/clientSpecificFiles/conditional.config.module.js").then((e=>{if(window.conditionalConfig){(0,window.conditionalConfig)(),window.ReWebSDK.userRegister_payloadDefault.deviceToken||W()}})):"34148bea_e202_4b36_826d_95d492ecc55b"==window._currentTenant._tenantId&&"granted"!=Notification.permission||W()}if(window.ReWebSDK.utils.importModule("/webEventTrack.js").then((e=>{if(window.webEventTrack){new(0,window.webEventTrack)}})),h.getItem("deviceRegistered")||window.ReWebSDK.utils.importModule("/deviceRegister.js").then((e=>{if(window.RegisterDevice){(0,window.RegisterDevice)()}})),"5f7a2e8e_1bdb_4739_9d28_278a2759394c"==window._currentTenant._tenantId&&n("https://al.resulticks.com/w/resulticks.js").then((e=>{window.resulticks.init(window._currentTenant.ga_id)})),window.ReWebSDK.utils.LSH.getItem("Res_User_Register_Payload_Tmp")){let e=window.ReWebSDK.utils.LSH.getItem("Res_User_Register_Payload_Tmp");e=JSON.parse(e),window.ReWebSDK.userRegister(e)}}}create_UUID(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)}))}constructor(){sessionStorage.getItem("documentReferrer")||sessionStorage.setItem("documentReferrer",document.referrer),this.initDependencies();try{w.getItem("ujId")||w.setItem("ujId",this.create_UUID())}catch(e){}"6da5fc51_c42d_4616_9f68_b80a2f37f335"==_currentTenant._tenantId&&window.ReWebSDK.utils.importModule("/clientSpecificFiles/conversion09.module.js").then((e=>{if(window.productLiveUserCount){(0,window.productLiveUserCount)()}})),function(){let e=null;function t(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((t=>{t.length&&(t[0].active&&t[0].active.postMessage({event:"ping"}),navigator.serviceWorker.addEventListener("message",(i=>{o("ping: event.data",i.data),"success"==i.data.ping&&(e=t,o("sw assigned",e)),i.data.pass_id&&(h.setItem("Res_Passport_Id",i.data.pass_id),o("PassportId updated:",h.getItem("Res_Passport_Id")),window.dispatchEvent(new CustomEvent("userRegisterEvent")))})))}))}window.ReWebSDK.AskPreOptIn=(...e)=>{const[t,i]=e;window.ReWebSDK.notificationPrompt=t,i&&i.notificationPromptConfig&&(window.ReWebSDK.notificationPromptConfig=i.notificationPromptConfig)},window.ReWebSDK.serviceWorkerFilePath=e=>{try{e&&e.length&&(window.ReWebSDK.serviceWorkerFile=e)}catch(e){}},t();const i=setInterval((()=>{t()}),2e3),n=setTimeout((()=>{clearInterval(i),clearTimeout(n),o("serviceWorkerChecker stopped")}),1e4);window.addEventListener("resul_notificationGranted",(function(){t()})),window.ReWebSDK.serviceWorkerFile="firebase-messaging-sw.js";const s=window._currentTenant._tenantId;if("9a9ec5d2-f860-43e3-a439-9c8450695551"!=s&&"b9fa736f-48f6-4acf-8a4b-dd625ca6c001"!=s&&"dd252cfe-a42e-4b80-8370-b7372ea4371d"!=s||(o("conditionalConfigModule calling!"),window.ReWebSDK.utils.importModule("./clientSpecificFiles/conditional.config.js").then((e=>e.conditionalConfig()))),window.ReWebSDK.returnUserConfig={days:-1},window.ReWebSDK.notificationPrompt=!1,"configs"in window.ReWebSDK&&("notificationPrompt"in window.ReWebSDK.configs&&(window.ReWebSDK.notificationPrompt=window.ReWebSDK.configs.notificationPrompt),"returnUserConfig"in window.ReWebSDK.configs&&(window.ReWebSDK.returnUserConfig={days:window.ReWebSDK.configs.returnUserConfig.days}),window.ReWebSDK.notificationPromptConfig=window.ReWebSDK.configs.notificationPromptConfig,"serviceWorkerFileConfig"in window.ReWebSDK.configs&&(window.ReWebSDK.serviceWorkerFile=window.ReWebSDK.configs.serviceWorkerFileConfig.path?window.ReWebSDK.configs.serviceWorkerFileConfig.path:_tenantPushConfig_.serviceworkerfile,o("Found custom serviceworker path:"+window.ReWebSDK.serviceWorkerFile)),"pushNotification"in window.ReWebSDK.configs&&(window.ReWebSDK.pushConfig=window.ReWebSDK.configs.pushNotification.pushConfig,window.ReWebSDK.pushHeaderKey=window.ReWebSDK.configs.pushNotification.pushHeaderKey),"securePushNotification"in window.ReWebSDK.configs)){const e=window.ReWebSDK.configs.securePushNotification;if(o("securePushNotification enabled",e),"string"==typeof e)try{const t=JSON.parse(atob(e.substring(3)));window.ReWebSDK.pushConfig=t.pushConfig,window.ReWebSDK.pushHeaderKey=t.pushHeaderKey,o("extracted securePushNotification succeesfully.")}catch(e){const t=JSON.parse(ReWebSDK.backups.push);window.ReWebSDK.pushConfig=t.pushConfig,window.ReWebSDK.pushHeaderKey=t.pushHeaderKey,console.log("err while extracting securePushNotification, applying backup")}}window.ReWebSDK.userRegister_payloadDefault={profileID:h.getItem("Res_Profile_Id")||"",passportId:h.getItem("Res_Passport_Id")||"",tenantId:window._currentTenant._tenantId,domainName:location.hostname.replace("www.",""),isPushEnabled:h.getItem("Token")?"true":"false",deviceId:h.getItem("_uuid")||"",tenantShortCode:_currentTenant.shortCode};try{var r=y.readCookie("ResData"),a=JSON.parse(r)||{},d={};JSON.parse(r)&&(d=y.JsonSort(a)[0]);var l=d.Cid||"",c=d.Pid;null==c&&(c=d.Rid||""),window.ReWebSDK.userRegister_payloadDefault.rid=y.getUrlVars().pid||y.getUrlVars().rid||c,window.ReWebSDK.userRegister_payloadDefault.cid=y.getUrlVars().cid||l,h.setItem("rid",y.getUrlVars().pid||y.getUrlVars().rid||c),h.setItem("cid",y.getUrlVars().cid||l)}catch(e){}window.ReWebSDK.userLogout=()=>{console.log("userLogout function initializing!")},window.ReWebSDK.formDataCapture=e=>window.ReWebSDK.formSubmitSDK(e),window.ReWebSDK.formSubmitSDK=e=>{var t=y.readCookie("ResData"),i=JSON.parse(t)||{},n={};JSON.parse(t)&&(n=y.JsonSort(i)[0]);var s=n.Cid||"",r=n.Pid;null==r&&(r=n.Rid||"");const a={SourceURL:window.location.href,pagereferrerurl:document.referrer,rid:y.getUrlVars().pid||y.getUrlVars().rid||r,cid:y.getUrlVars().cid||s,pagetitle:document.title},d={...window.ReWebSDK.userRegister_payloadDefault,...e,...a},l=JSON.stringify((new Date).getHours())+JSON.stringify((new Date).getMinutes())+JSON.stringify((new Date).getSeconds())+JSON.stringify((new Date).getMilliseconds());return o("formSubmitSDK",JSON.stringify(d)),window.onbeforeunload=function(){w.getItem(l)||navigator.serviceWorker.getRegistrations().then((e=>{e.length&&e[0].active.postMessage({event:"customEvent",payload:d})}))},new Promise(((e,t)=>{const i=D.formDataCapture(d);i.finally((()=>{w.setItem(l,"true"),e(i)}))}))},window.ReWebSDK.userRegister=function(t={}){o("userRegister called");const i=JSON.parse(localStorage.getItem("userData")||"{}");window.ReWebSDK.userRegister_payloadDefault.deviceTokenOld=h.getItem("OldToken")||window.ReWebSDK.userRegister_payloadDefault.deviceToken;let n={...window.ReWebSDK.userRegister_payloadDefault,...t};"54b865b8_5123_461a_accf_d12ed01ce383"==_currentTenant._tenantId&&(n.uniqueId=i.pan||"",n.phone=i.Mobile||"",n.name=i.username||""),n.passportId="",h.getItem("DToken")?n.deviceToken=h.getItem("DToken"):n.deviceToken="",h.setItem("userRegisterData",JSON.stringify(n)),h.setItem("userRegisterInited",!0),h.setItem("uniqueId",n.uniqueId);let s=!1;if(e&&(s=!0,e[0].active.postMessage({event:"userRegisterEvent",payload:n}),"true"==localStorage.getItem("debugWithConsoleLog")&&e[0].active.postMessage({event:"customEventTest",data:{type:"userRegister",data:n}}),o("UserRegistration payload",n)),!s)return f(n)};let u=0,g=0;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(t=>{t.data.pass_id&&"success"!=t.data.pass_id&&(o("received pass_id: ",t.data.pass_id),h.setItem("Res_Passport_Id",t.data.pass_id),o("received pass_id updated: ",h.getItem("Res_Passport_Id")),ReWebSDK.userRegister_payloadDefault.passportId=t.data.pass_id,window.dispatchEvent(new CustomEvent("userRegisterEvent")),h.setItem("Res_userLoggedIn",!0),function e(t){o("calling forcetoken1");try{w.getItem("userRegisterTokenForced")||(window.ReWebSDK.methods.tokenRegisterApi_force(),w.setItem("userRegisterTokenForced",!0))}catch(t){o("ClientInputs :: err on token register force",t),o("retrying... in ",g+" secs");const i=setTimeout((()=>{g<20&&(e(),g++),clearTimeout(i)}),1e3*g)}}(),e[0].active.postMessage({event:"clear_pass_id"}))}));let p=0;const m=e=>{if(p<5){o("userReg Retrying",p++);const t=setTimeout((()=>{f(e),clearTimeout(t)}),3e3)}},f=e=>(h.setItem("Res_User_Register_Payload_Tmp",JSON.stringify(e)),e.deviceTokenOld=h.getItem("OldToken")||window.ReWebSDK.userRegister_payloadDefault.deviceToken,D.UserRegistration(e).then((t=>{if(t.status){if(p=0,"success"!=t.data&&t.data){let e=t.data;o("updating passportId: ",e),h.setItem("Res_Passport_Id",e),window.ReWebSDK.userRegister_payloadDefault.passportId=e,h.getItem("Res_User_Register_Payload_Tmp")&&h.removeItem("Res_User_Register_Payload_Tmp"),h.setItem("Res_userLoggedIn",!0),function e(t){o("calling forcetoken");try{w.getItem("userRegisterTokenForced")||(window.ReWebSDK.methods.tokenRegisterApi_force(),w.setItem("userRegisterTokenForced",!0))}catch(t){o("ClientInputs :: err on token register force",t),o("retrying... in ",u+" secs");const i=setTimeout((()=>{u<20&&(e(),u++),clearTimeout(i)}),1e3*u)}}()}return o("res id",t),window.dispatchEvent(new CustomEvent("userRegisterEvent")),o("UserRegistration",t),t}m(e)}),(t=>{m(e)})));var S;window.ReWebSDK.customEvent=(t,i=1)=>{console.log("custome event save",i);const n={...t,deviceId:h.getItem("_uuid"),pageUrl:window.location.href,profileID:h.getItem("Res_Profile_Id")||"",passportId:h.getItem("Res_Passport_Id")||"",domainName:location.hostname.replace("www.",""),tenantId:window._currentTenant._tenantId,sessionId:w.getItem("ujId"),uniqueId:h.getItem("uniqueId")||""};let s=n.eventName;if(s=s.replaceAll(/\s/g,"").toLowerCase(),s.includes("exit")||s.includes("aband")){let e={url:`${ReWebSDK.methods.clientApiService.RUN_Baseurl}${ReWebSDK.methods.clientApiService.RUN_Baseurl}`,apiRandId:Date.now(),payload:n};w.setItem("customEventStorage",JSON.stringify(e))}if(1==i)try{h.setItem("customEventUserPayLoad",JSON.stringify(t)),w.setItem("lastEvents",n.eventName)}catch(e){o(e)}else 0==i&&w.setItem("lastEvents",n.eventName);return"Product Page Visit"!=n.eventName&&(h.setItem("lastEvents",n.eventName),window.dispatchEvent(new CustomEvent("newCustomEvent")),n.data&&w.setItem(n.eventName,JSON.stringify(n.data))),e?(e[0].active.postMessage({event:"customEvent",payload:n}),"true"==localStorage.getItem("debugWithConsoleLog")&&e[0].active.postMessage({event:"customEventTest",payload:n}),new Promise(((e,t)=>{e("true")}))):new Promise(((e,t)=>{const i=D.clientCustomEvent(n).then((()=>{e(i)}))}))},window.ReWebSDK.userLocation=e=>{e&&e.latitude&&e.longitude&&window.ReWebSDK.utils.LSH.setItem("currentGeoLocation",JSON.stringify(e)),D.UserLocationUpdate(e)},window.ReWebSDK.conversionTracking=e=>y.conversionTracking(e),window.ReWebSDK.resumeJourney=()=>new Promise(((e,t)=>{window.ReWebSDK.utils.importModule("/resumeJourney.js").then((i=>{console.log("resume journey..."),window.resumeJourney&&(console.log("resume journey...inited"),(0,window.resumeJourney)().then((t=>{e(t)}),(e=>{t(e)})))}))})),window.ReWebSDK.updateSDKToken=e=>{null!=S&&S(e)},window.ReWebSDK.getSdkToken={},window.ReWebSDK.getSdkToken.tokenListener=e=>{S=e;let t=h.getItem("Token");""!=t&&null!=t&&S(t)},setTimeout((()=>{let e=ReWebSDK.utils.LSH.getItem("lastEvents");if(e&&"pageexit"==e.replaceAll(/\s/g,"").toLowerCase()&&ReWebSDK.utils.LSH.removeItem("lastEvents"),w.getItem("customEventStorage")){let e=JSON.parse(w.getItem("customEventStorage"));const{payload:t}=e;let i=t.eventName;i=i.replaceAll(/\s/g,"").toLowerCase(),D.clientCustomEvent(t).then((e=>{o(`customEventStorage==${JSON.stringify(e)}`),i.includes("exit")||w.removeItem("customEventStorage")})),i.includes("exit")&&(w.setItem("lastEvents",i),window.dispatchEvent(new CustomEvent("newCustomEvent")),w.removeItem("customEventStorage"))}}),1500)}();try{if(window.addEventListener("sdk_ready",(()=>{try{y.fnTrackUrl("ResData"),D.UserJourneyScreens();let e=JSON.parse(h.getItem("ujScreens"))||[];D.UserJourneyBulk(e)}catch(e){}})),window.ReWebSDK.utils.LSH.getItem("Resul_Profile_Id"))try{const e=window.ReWebSDK.utils.LSH.getItem("Res_Passport_Id"),t=window.ReWebSDK.utils.LSH.getItem("Res_Profile_Id");w.setItem("Res_Profile_Id",t),ReWebSDK.userRegister_payloadDefault.profileID=t,ReWebSDK.userRegister_payloadDefault.passportId=e}catch(e){}else try{let e=this.create_UUID();const t="P_"+window._resMethods.decimalToHexString(window._resMethods.getFPID.get(e));console.log("Krishna: ",t),w.setItem("Res_Profile_Id",t),window.ReWebSDK.utils.LSH.setItem("Resul_Profile_Id",t),window.ReWebSDK.utils.LSH.setItem("Res_Passport_Id",t),window.ReWebSDK.utils.LSH.setItem("Res_Profile_Id",t),ReWebSDK.userRegister_payloadDefault.profileID=t,ReWebSDK.userRegister_payloadDefault.passportId=t}catch(e){}"6da5fc51_c42d_4616_9f68_b80a2f37f335"==_currentTenant._tenantId||"62248a34_d4ce_42c8_ae02_733997f234df"==_currentTenant._tenantId?(this.conditionalMethods(),setTimeout((()=>{window.dispatchEvent(new CustomEvent("sdk_ready"))}),500)):(this.conditionalMethods(),window.dispatchEvent(new CustomEvent("sdk_ready")))}catch(e){}try{if("7301417b_a775_44b2_9fb5_db8fbddd35f4"==_currentTenant._tenantId){let e=document.createElement("script");e.src="https://static.getclicky.com/js";let t=document.createElement("noscript"),i=document.createElement("img");i.height="1",i.width="1",i.src="http://static.getclicky.com/101388627ns.gif",t.appendChild(i),document.body.appendChild(e),e.onload=()=>{clicky.init(101388627)},e.onerror=()=>{},document.body.appendChild(t),t.onerror=()=>{}}}catch(e){}Object.freeze(window._currentTenant),o(window.ReWebSDK.configs)}}}();