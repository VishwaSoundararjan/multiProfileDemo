!function(){"use strict";window.inAppNotification=function(){var e={},t=null;function n(){try{return document.querySelector('script[src*="inAppNotificationCss.js"]')||window.ReWebSDK.utils.importModule("/inAppNotificationCss.js").then((()=>{var e,t;window.inappCss&&(e=window.inappCss,(t=document.createElement("style")).type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t))})),!0}catch(e){return!1}}function o(){n()}"complete"===document.readyState?o():window.addEventListener("DOMContentLoaded",o());var i={},c=0;return i.show=function(n,o){let a=!1;try{window.addEventListener("message",(e=>{try{let t=JSON.parse(e.data),i=(t.method,n.click_actions);t.script.split(";").forEach((e=>{try{if(e&&i)try{r.hide();let t=window.location.href,n=e.replace("Prod_ID",`${t.split("/").pop().split(".")[0]}`),c=new Function(`return ${n}`)();a=!0,c.click(),window.ReWebSDK.methods.clientApiService.inAppNotificationTracking("opened","2",o).then((e=>{}));try{let e=document.createElement("iframe");e.src=i,e.style.display="none",document.body.appendChild(e),e.onload=()=>{setTimeout((()=>{e.remove(),ReWebSDK.conversionTracking()}),1e4)},e.onerror=()=>{}}catch(e){}}catch(e){console.log("Error: ",e)}}catch(e){}}))}catch(e){}}))}catch(e){}var s=document.createElement("div");s.id="ResulticksPagePush-container";var l=n.text;"6da5fc51_c42d_4616_9f68_b80a2f37f335"==_currentTenant._tenantId&&l.includes("people viewing this product")?s.className="ResulFlex joannContainer Resulticks-inapp-"+(n.placement||"bottom-right"):s.className="ResulFlex Resulticks-inapp-"+(n.placement||"bottom-right"),document.body.appendChild(s),document.querySelector("#ResulticksPagePush-container").insertAdjacentHTML("afterbegin",'<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" crossorigin="anonymous" />');var r=document.createElement("div");n.inAppNotificationBgColor&&n.inAppNotificationBgColor&&(r.style.backgroundColor=n.inAppNotificationBgColor),n.inAppNotificationTextColor&&n.inAppNotificationTextColor&&(r.style.backgroundColor=n.inAppNotificationBgColor),r.id=++c,r.id="RPagePush-"+r.id,r.className="ResulticksPagePush-RPagePush";var d=document.createElement("span");d.innerHTML="Ã—",d.className="ResulticksCloseIcon",n.inAppNotificationBgColor&&n.inAppNotificationBgColor&&(d.style.backgroundColor=n.inAppNotificationBgColor),d.onclick=e=>{sessionStorage.removeItem("Resul_inAppShown"),window.ReWebSDK.methods.clientApiService.inAppNotificationTracking("dismiss","3",o).then((e=>{})),r.hide(),e.stopPropagation(e);try{window.ResPopupClose()}catch(e){}},window.ResPopupClose=function(e){sessionStorage.removeItem("Resul_inAppShown"),C(),e.stopPropagation()};var u=document.createElement("div"),p=document.createElement("div");if(u.className="Resul-flex",p.className="Resul-flex Resul-ButtonBox",u.appendChild(d),n.hasOwnProperty("icon")&&n.icon){var m=document.createElement("div");m.id="Resul-icon-wrapper",u.appendChild(m)}var h,g=document.createElement("div");if(g.className="ResulBodyContentWrapper",g.style.color=n.contentBgColor,u.appendChild(g),console_log("options",n),n.title){var y=document.createElement("h4");y.className="ResulticksPagePush-title",y.innerHTML=n.title,y.title=n.title,y.style.color=n.titleColor||"#000",n.edm||g.appendChild(y)}"6da5fc51_c42d_4616_9f68_b80a2f37f335"==_currentTenant._tenantId&&l.includes("people viewing this product")?n.text&&((h=document.createElement("p")).className="ResulticksPagePush-text",h.innerHTML="<span id='ResulJoannLiveCount'></span> "+n.text,h.title=n.text,h.style.color=n.bodyColor||"#333",n.edm||g.appendChild(h)):n.text&&((h=document.createElement("p")).className="ResulticksPagePush-text",h.innerHTML=n.text,h.title=n.text,h.style.color=n.bodyColor||"#333",n.edm||g.appendChild(h));n.productLiveVisit&&((h=document.createElement("p")).className="ResulticksPagePush-liveVisit",h.innerHTML='&#128065 <span id="ResulJoannLiveCount"></span> User\'(s)',h.style.color=n.bodyColor||"#333",n.edm||g.appendChild(h));if(r.appendChild(u),n.image){let e=document.createElement("div");var w;e.className="resulContentWarpper",(w=document.createElement("img")).src=n.image,w.className="ResulticksPagePush-image",e.appendChild(w),r.appendChild(e)}if(!n.edm)try{if(!n.isOverlay||"true"!=n.isOverlay&&1!=n.isOverlay)document.getElementById("ResulticksPagePush-container").style.pointerEvents="none";else try{let e=document.getElementById("ResulticksPagePush-container");e.style.background=n.overlayColor,e.style.pointerEvents="auto"}catch(e){}}catch(e){}if(n.edm){let e=document.createElement("div");e.className="resulContentWarpper";var f=document.createElement("iframe");f.onload=()=>{console.log("Success")},f.onerror=e=>{console.log(e)},fetch(n.edm).then((e=>e.text())).then((t=>{n.title="",n.text="",f.className="ResulticksPagePush-edm",f.id="iframe_EDM",e.appendChild(f),r.appendChild(e);let i=document.querySelector("iframe.ResulticksPagePush-edm"),c=document.querySelector("#ResulticksPagePush-container");function s(e){try{a||window.ReWebSDK.methods.clientApiService.inAppNotificationTracking("dismiss","3",o).then((e=>{})),document.querySelector(".ResulticksPagePush-edm")&&document.querySelector(".ResulticksPagePush-edm").contentWindow.document.querySelector("a#popupCloseIcon").click(),document.removeEventListener("click",s)}catch(e){}}c.style.display="none",i.contentDocument.write(t),i.contentWindow.document.close(),i.addEventListener("load",(function(){setTimeout((()=>{try{try{if("6da5fc51_c42d_4616_9f68_b80a2f37f335"==_currentTenant._tenantId&&"Mozilla Firefox"==window.ReWebSDK.utils.browserName){let e=document.getElementById("iframe_EDM");if(!e.style.height||!e.style.width||"0px"==e.style.height||"0px"==e.style.width)try{e.style.height=e.contentWindow.document.getElementById("rpTemplateContainer").style.height,e.style.width=e.contentWindow.document.getElementById("rpTemplateContainer").style.width}catch(e){}}}catch(e){}c.style.display="flex";try{let e=document.querySelector(".resulContentWarpper iframe").contentWindow.document.querySelector("#templateCloseAsIcon");"6da5fc51_c42d_4616_9f68_b80a2f37f335"==_currentTenant._tenantId&&e&&e.addEventListener("click",(()=>{window.ReWebSDK.methods.clientApiService.inAppNotificationTracking("dismiss","3",o).then((e=>{})),document.removeEventListener("click",s)}))}catch(e){}try{"6da5fc51_c42d_4616_9f68_b80a2f37f335"==_currentTenant._tenantId&&document.addEventListener("click",s)}catch(e){}try{let e=t=>0===t.childNodes.length?t:e(t.lastChild),t=document.getElementById("iframe_EDM").contentWindow.document.getElementById("lvTag");e(t).textContent=window.productViewCountGlobal?productViewCountGlobal:1,setInterval((()=>{try{e(t).textContent=window.productViewCountGlobal?productViewCountGlobal:1}catch(e){}}),500)}catch(e){}}catch(e){}}),2e3),document.getElementsByClassName("ResulticksCloseIcon")[0].style.display=" none";try{if(!n.isOverlay||"true"!=n.isOverlay&&1!=n.isOverlay)document.getElementById("ResulticksPagePush-container").style.pointerEvents="none";else try{let e=document.getElementById("ResulticksPagePush-container");e.style.background=n.overlayColor,e.style.pointerEvents="auto"}catch(e){}}catch(e){}})),n.actions&&n.actions.length&&r.appendChild(p)})),document.getElementById("ResulticksPagePush-container").classList.add("tbn"),u.style.display="none",n.actions&&!n.actions.length&&(r.style.backgroundColor="transparent")}if(n.video){let e=document.createElement("div");e.className="resulContentWarpper",n.video.indexOf("youtu")>-1?(t=document.createElement("iframe"),n.video.indexOf("watch?v=")>-1&&(t.src=n.video.replace("watch?v=","embed/"))):((t=document.createElement("video")).setAttribute("controls",!1),t.setAttribute("autoplay",!0),t.src=n.video),t.className="ResulticksPagePush-video",e.appendChild(t),r.appendChild(e)}if(n.actions&&n.actions.length>0&&n.actions.forEach(((t,c)=>{var a=document.createElement("button");a.innerText=t.title,a.className="ResulticksPagePush-ActionButton",t.actionTextColor&&(a.style.color=t.actionTextColor),t.actionBgColor&&(a.style.backgroundColor=t.actionBgColor),a.onclick=c=>function(t,c){console_log("handleActions clicked...!",JSON.stringify(t,n.actions)),r.hide();const{action:a}=t;switch(a){case"dismiss":window.ReWebSDK.methods.clientApiService.inAppNotificationTracking(a,"3",o).then((e=>{})),c.stopImmediatePropagation();try{n.edm&&document.querySelector(".ResulticksPagePush-edm").contentWindow.document.querySelector("a#popupCloseIcon").click()}catch(e){}v();break;case"later":e=n;const r=new Date((new Date).toUTCString()).toISOString().split(".")[0];new Date(r)>=new Date(e.ttl)?window.ReWebSDK.methods.clientApiService.inAppNotificationTracking("expired","1",o).then((e=>{})):i.show(e),window.ReWebSDK.methods.clientApiService.inAppNotificationTracking(a,"4",o).then((e=>{})),c.stopImmediatePropagation();break;case"resumejourney":c.stopImmediatePropagation(),window.ReWebSDK.resumeJourney().then((e=>{console_log("resumeJourney result: ",JSON.stringify(e)),window.ReWebSDK.resumeJourneyCallback&&"function"==typeof window.ReWebSDK.resumeJourneyCallback&&window.ReWebSDK.resumeJourneyCallback(e),window.dispatchEvent(new CustomEvent("resumeJourneyData",{data:e})),e.type}),(e=>{console_log("resumeJourney result: ",e)}));break;default:const{actionId:d,actionUrl:u}=t;if(document.querySelector("#ResulticksPagePush-container video")&&(document.querySelector("#ResulticksPagePush-container video").src=""),window.ReWebSDK.methods.clientApiService.inAppNotificationTracking(a,d,o).then((e=>{})),"6da5fc51_c42d_4616_9f68_b80a2f37f335"==_currentTenant._tenantId&&l.includes("people viewing this product")){var s=window.location.href;document.querySelector('[data-pid="'+s.split("/").pop().split(".")[0]+'"][data-product-component="add-button"]').click();try{console.log(u);let e=document.createElement("iframe");e.src=u,e.style.display="none",document.body.appendChild(e),e.onload=()=>{setTimeout((()=>{e.remove(),ReWebSDK.conversionTracking()}),1e4)},e.onerror=()=>{}}catch(e){console.log(e)}}else window.open(u||"/","_blank");c.stopImmediatePropagation(),navigator.serviceWorker.getRegistrations().then((e=>{e.length&&e[0].active.postMessage({event:"dismissInapp"})}))}}(t,c),p.appendChild(a)})),n.hasOwnProperty("banner")){document.getElementById("ResulticksPagePush-container").className="banner-overlay";try{g.style.marginTop="10px"}catch(e){console.log("error is: ",e)}m&&(m.className="Resul-icon-wrapper")}if(n.width)r.style.width=n.width;else switch(n.placement){case"fullscreen":break;default:n.edm||n.text&&n.text.length>350?r.style.width="auto":"6da5fc51_c42d_4616_9f68_b80a2f37f335"==_currentTenant._tenantId&&l.includes("people viewing this product")?r.style.width="190px":r.style.width="360px"}n.icon&&((w=document.createElement("img")).src=n.icon,w.className="ResulticksPagePush-icon",m.appendChild(w));if(n.height&&(r.style.height=n.height),n.overlay&&(document.getElementById("ResulticksPagePush-container").className="rp-overlay"),"function"==typeof n.callback&&r.addEventListener("click",n.callback),r.hide=function(){r.className+=" ResulticksPagePush-fadeOut",r.addEventListener("animationend",C,!1)},n.timeout){const e=setTimeout((function(){r.hide(),clearTimeout(e)}),n.timeout)}n.type&&(r.className+=" ResulticksPagePush-"+n.type),n.placement&&(r.className+=" ResulticksPagePush-"+n.placement),r.addEventListener("click",(function(){document.querySelector("#ResulticksPagePush-container video")&&(document.querySelector("#ResulticksPagePush-container video").src=""),r.hide(),window.open(n.click_actions||"/","_blank"),window.ReWebSDK.methods.clientApiService.inAppNotificationTracking("opened","2",o).then((e=>{}))}));const v=()=>{navigator.serviceWorker.getRegistrations().then((e=>{e.length&&e[0].active.postMessage({event:"dismissInapp"})})),sessionStorage.removeItem("Resul_inAppShown")};function C(){document.getElementById("ResulticksPagePush-container").remove(),n.overlay&&document.getElementById("ResulticksPagePush-container").classList.remove("rp-overlay"),v()}if(window.onbeforeunload=function(){console_log("_inappdismiss passed to sw"),v()},n.edm||n.actions&&n.actions.length&&r.appendChild(p),document.getElementById("ResulticksPagePush-container").appendChild(r),document.querySelector("#ResulticksPagePush-container #ResulJoannLiveCount")){try{window.frames.iframe_EDM.contentDocument.getElementById("lvTag").innerHTML=window.productViewCountGlobal?productViewCountGlobal:1}catch(e){}document.querySelector("#ResulticksPagePush-container #ResulJoannLiveCount").innerHTML=window.productViewCountGlobal?productViewCountGlobal:1}return r},i}}();
